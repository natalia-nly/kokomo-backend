(this.webpackJsonpkokomo=this.webpackJsonpkokomo||[]).push([[0],{115:function(e,a,t){e.exports=t(151)},120:function(e,a,t){},122:function(e,a,t){},151:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(17),c=t.n(l),o=(t(120),t(9)),s=(t(121),t(122),t(16)),m=t(5),i=t(27),u=t(2),p=t(44),d=t.n(p),g=t(18),b=t(14),f=t.n(b),E=function e(){var a=this;Object(g.a)(this,e),this.createProperty=function(e){return a.service.post("/create-property",e).then((function(e){return e.data}))},this.uploadPicture=function(e){return a.service.post("/upload",e).then((function(e){return e.data}))},this.editProperty=function(e,t){return a.service.post("/edit/"+e,t).then((function(e){return e.data}))},this.allProperties=function(){return a.service.get("/").then((function(e){return e.data}))},this.categoryProperties=function(e){return a.service.get("/category/"+e).then((function(e){return e.data}))},this.propertyDetails=function(e){return a.service.get("/details/"+e).then((function(e){return e.data}))},this.propertyLove=function(e){return a.service.get("/love/"+e).then((function(e){return e.data}))},this.addComment=function(e,t){return a.service.post("/add-comment/"+e,t).then((function(e){return e.data}))},this.deleteProperty=function(e){return a.service.get("/delete/"+e).then((function(e){return e.data}))};var t=f.a.create({baseURL:"https://kokomo-react.herokuapp.com/api/property",withCredentials:!0});this.service=t},v=new E,h={properties:[],favourites:[]},k=function(e){var a,t=Object(n.useState)(h),l=Object(o.a)(t,2),c=l[0],s=l[1];Object(n.useEffect)((function(){"All"===e.filter?v.allProperties().then((function(e){s((function(a){return Object(u.a)(Object(u.a)({},a),{},{favourites:e[1],properties:e[0]})}))})):"Favourites"===e.filter?v.allProperties().then((function(e){var a=e[1],t=e[0],n=[];t.map((function(e){return a.includes(e._id)&&n.push(e),n})),s((function(e){return Object(u.a)(Object(u.a)({},e),{},{favourites:a,properties:n})}))})):"Categories"===e.filter?v.categoryProperties(e.match.params.name).then((function(e){s((function(a){return Object(u.a)(Object(u.a)({},a),{},{favourites:e[1],properties:e[0]})}))})):v.categoryProperties(e.filter).then((function(e){s((function(a){return Object(u.a)(Object(u.a)({},a),{},{favourites:e[1],properties:e[0]})}))}))}),[e]);if(c.properties.length>=1){var p=c.properties.map((function(e,a){var t="far fa-heart fa-stack-1x fa-inverse";c.favourites&&c.favourites.includes(e._id)&&(t="fas fa-heart fa-stack-1x fa-inverse");var n=r.a.createElement(r.a.Fragment,null);if(e.rating){var l=e.rating.counter,o=0;if(l.length){o=parseFloat((l.reduce((function(e,a){return e+a}),0)/l.length).toFixed(2))}var p={size:12,count:5,color:"#ffba69",activeColor:"#ffba69",a11y:!0,isHalf:!0,emptyIcon:r.a.createElement("i",{className:"far fa-star"}),halfIcon:r.a.createElement("i",{className:"fa fa-star-half-alt",style:{color:"#ffba69"}}),filledIcon:r.a.createElement("i",{className:"fa fa-star"}),edit:!1,value:o};n=r.a.createElement("div",null,r.a.createElement(d.a,p))}return r.a.createElement("div",{className:"property-card",key:a},r.a.createElement("a",{onClick:function(){return a=e._id,void v.propertyLove(a).then((function(e){var t=Object(i.a)(c.favourites);t.push(a),s(Object(u.a)(Object(u.a)({},c),{},{favourites:t}))}));var a}},r.a.createElement("span",{className:"fa-stack fa-2x float-right heart-home"},r.a.createElement("i",{className:"fas fa-circle fa-stack-2x orange-80"}),r.a.createElement("i",{className:t}))),r.a.createElement(m.b,{to:"/property/"+e._id},r.a.createElement("img",{src:e.mainImage,style:{zIndex:1},alt:e.name}),r.a.createElement("img",{src:e.mainImage,className:"blur-image",alt:e.name})),r.a.createElement(m.b,{to:"/property/"+e._id},r.a.createElement("div",{className:"flex-md-row justify-content-between align-items-baseline"},r.a.createElement("h3",null,e.name),n),r.a.createElement("p",{className:"mdi mdi-map-marker-radius"}," ",e.location.name)))}));a=r.a.createElement("div",{className:"properties-group"},p)}else"All"===e.filter||(a="Favourites"===e.filter||"Categories"===e.filter?r.a.createElement("div",{className:"text-center"},r.a.createElement("img",{src:"/images/broken-heart.png",className:"black-white",alt:"Sin favoritos"}),r.a.createElement("p",null,"Todav\xeda no tienes favoritos")):r.a.createElement("div",{className:"text-center"},r.a.createElement("img",{src:"/images/"+e.filter+".png",className:"black-white",alt:e.filter}),r.a.createElement("p",null,"Todav\xeda no hay locales en la categoria ",e.filter)));return r.a.createElement(r.a.Fragment,null,a)},N=t(61),y=new E,j=function(){var e=new Date;e.setDate(e.getDate());var a={allResults:[],bookingDate:e.toISOString().substr(0,10),numberGuests:0},t=Object(n.useState)(a),l=Object(o.a)(t,2),c=l[0],s=l[1];Object(n.useEffect)((function(){var e=f.a.CancelToken.source();return function(){try{y.allProperties().then((function(e){s((function(a){return Object(u.a)(Object(u.a)({},a),{},{allResults:e[0]})}))}))}catch(e){if(!f.a.isCancel(e))throw e;console.log("cancelled")}}(),function(){e.cancel()}}),[]);var m=function(e){var a=new Date,t=new Date(e.openingHours[0].openingDays.openingDay),n=new Date(e.openingHours[0].openingDays.closingDay);return'\n    <div>\n    <a href="/#/property/'.concat(e._id,'" class="btn-kokomo btn-kokomo-danger" style="font-size: 16px;">\n    ').concat(e.name,'\n    </a>\n\n    <div style="font-size: 14px;">\n        <span style="color: grey;">Nota:\n        ').concat(function(e){var a=e.counter;if(e.counter.length){return parseFloat((a.reduce((function(e,a){return e+a}),0)/a.length).toFixed(2))}return"Sin evaluaciones"}(e.rating),'\n        </span>\n      </div>\n      <div style="font-size: 14px; color: grey;">Categor\xeda:\n        ').concat(e.categories[0],'\n      </div>\n      <div style="font-size: 14px; color: green;">\n        ').concat(t.getTime()<=a.getTime()&&a.getTime()<=n.getTime()?"Abierto":"Cerrado","\n      </div>\n    </div>")},i=r.a.createElement(r.a.Fragment,null);return c.allResults.length&&(i=r.a.createElement("div",{className:"container mt-4 mapa"},r.a.createElement(N.a,{bootstrapURLKeys:{key:"AIzaSyC2gU3A4p3BVUlocsx-HJtJ8Wjar2aof9Y",language:"sp"},center:{lat:41.35,lng:2.1},defaultZoom:11,options:function(e){return{disableDefaultUI:!1,mapTypeControl:!0,streetViewControl:!0,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"on"}]}]}},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){return function(e,a,t){var n=[],r=[];t.forEach((function(t){n.push(new a.Marker({position:{lat:t.location.lat,lng:t.location.long},map:e})),r.push(new a.InfoWindow({content:m(t)}))})),n.forEach((function(a,t){a.addListener("click",(function(){r[t].open(e,a)}))}))}(e.map,e.maps,c.allResults)}}))),r.a.createElement("div",null,i)},w=function(){return r.a.createElement("div",{className:"category-group"},r.a.createElement("div",{className:"one-category"},r.a.createElement(m.b,{to:"/category/Surfer"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{src:"/images/Surfer.png",alt:"Surfer"})),r.a.createElement("p",null,"Surfer"))),r.a.createElement("div",{className:"one-category"},r.a.createElement(m.b,{to:"/category/Restaurante"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{src:"/images/Restaurante.png",alt:"Restaurant"})),r.a.createElement("p",null,"Restaurant"))),r.a.createElement("div",{className:"one-category"},r.a.createElement(m.b,{to:"/category/Chillout"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{src:"/images/chillout.png",alt:"Chillout"})),r.a.createElement("p",null,"Chillout"))),r.a.createElement("div",{className:"one-category"},r.a.createElement(m.b,{to:"/category/Bar"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{src:"/images/bar.png",alt:"Bar"})),r.a.createElement("p",null,"Bar"))),r.a.createElement("div",{className:"one-category"},r.a.createElement(m.b,{to:"/category/Discoteca"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{src:"/images/Discoteca.png",alt:"Disco"})),r.a.createElement("p",null,"Disco"))))},O=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"hero-landing",style:{padding:"50px 10px"}},r.a.createElement("div",{className:"home-container"},r.a.createElement("h2",{className:"hero-title",style:{color:"white"}},"Este verano",r.a.createElement("br",null),"no te quedes sin planes"),r.a.createElement("h2",{className:"hero-subtitle",style:{color:"#d0dde2"}},"Reserva en los mejores",r.a.createElement("br",null),"locales de tu zona"),r.a.createElement("p",{className:"hero-arrow-phone mdi mdi-arrow-down"}),r.a.createElement("p",{className:"hero-arrow-desktop mdi mdi-arrow-down"}))),r.a.createElement("div",{className:"mapa"},r.a.createElement(j,null)),r.a.createElement("div",{className:"bg-landing"},r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"title-landing text-center"},"Reserva en un segundo"),r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"shadow-blue"},r.a.createElement("img",{src:"/images/1.png",className:"emoji-img",alt:"Busca locales"}),r.a.createElement("h2",{className:"subtitle-landing"},"Encuentra los mejores locales"),r.a.createElement("p",null,"Filtra los locales por d\xeda o por categor\xeda para encontrar el ideal"))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"shadow-blue"},r.a.createElement("img",{src:"/images/2.png",className:"emoji-img",alt:"Crea reservas"}),r.a.createElement("h2",{className:"subtitle-landing"},"Crea tu reserva"),r.a.createElement("p",null,"Reserva r\xe1pidamente desde Kokomo en tus locales favoritos"))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"shadow-blue"},r.a.createElement("img",{src:"/images/3.png",className:"emoji-img",alt:"Comparte con los amigos"}),r.a.createElement("h2",{className:"subtitle-landing"},"Comp\xe1rtela con tus amigos"),r.a.createElement("p",null,"Comparte los detalles de la reserva con quien quieras")))))),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(w,null)),r.a.createElement("div",{className:"landing-container",style:{paddingBottom:"80px"}},r.a.createElement(k,{filter:"All"})),r.a.createElement("div",{className:"banner-orange"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h2",null,"\xbfTienes un local?"),r.a.createElement("h3",null,"Registra tus locales y consigue reservas de tus clientes")),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(m.b,{to:"/signup-local",className:"btn-kokomo btn-kokomo-banner float-right p-2 mt-4"},"Crea tu cuenta")))),r.a.createElement("div",{className:"footer"},r.a.createElement("p",null,"Made in Barcelona |"," ",r.a.createElement("a",{href:"https://github.com/natalia-nly",target:"_blank",rel:"noopener noreferrer"},"Natalia")," ","&"," ",r.a.createElement("a",{href:"https://github.com/CSS1982",target:"_blank",rel:"noopener noreferrer"},"Claudi"))))},x=t(84),C=t(78),D=function(e){var a=r.a.createElement(x.a,{bg:"light",expand:"lg",className:"navbar navbar-expand-sm navbar-light fixed-top",style:{backgroundColor:"rgb(255, 255, 255)",paddingBottom:0}},r.a.createElement(m.c,{className:"navbar-brand",to:"/"},"KOKOMO"),r.a.createElement(x.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(x.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(C.a,{className:"ml-auto"},r.a.createElement(m.c,{className:"nav-link",to:"/",exact:!0,activeClassName:"navbar-active-logout"},"Inicio"),r.a.createElement(m.c,{className:"nav-link",to:"/signup-local",activeClassName:"navbar-active-logout"},"Tengo un local"),r.a.createElement(m.c,{className:"nav-link",to:"/signup",activeClassName:"navbar-active-logout"},"Registrarme ahora"),r.a.createElement(m.c,{className:"nav-link",to:"/login",activeClassName:"navbar-active-logout"},"Iniciar sesi\xf3n")))),t=r.a.createElement("nav",{className:"navbar-kokomo"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(m.c,{to:"/",className:"mdi mdi-home",exact:!0,activeClassName:"navbar-active-login"},r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-circle dot-kokomo"})))),r.a.createElement("li",null,r.a.createElement(m.c,{to:"/my-favourites",className:"mdi mdi-heart-outline",activeClassName:"navbar-active-login"},r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-circle dot-kokomo"})))),r.a.createElement("li",{className:"search-icon-menu"},r.a.createElement(m.c,{to:"/search",className:"mdi mdi-magnify",activeClassName:"navbar-active-login"},r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-circle dot-kokomo"})))),r.a.createElement("li",null,r.a.createElement(m.c,{to:"/my-bookings",className:"mdi mdi-calendar",activeClassName:"navbar-active-login"},r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-circle dot-kokomo"})))),r.a.createElement("li",null,r.a.createElement(m.c,{to:"/profile",className:"mdi mdi-account-circle",activeClassName:"navbar-active-login"},r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-circle dot-kokomo"}))))));return null!==e.getTheUser&&(a=t),r.a.createElement(r.a.Fragment,null," ",a," ")},F=t(12),I=t(35),S=t(37),R=t(36),T=function e(){var a=this;Object(g.a)(this,e),this.signup=function(e,t,n,r){return a.service.post("/signup",{username:e,password:t,telNumber:n,email:r}).then((function(e){return e.data}))},this.signupLocal=function(e,t,n,r){return a.service.post("/signup-local",{username:e,password:t,telNumber:n,email:r}).then((function(e){return e.data}))},this.login=function(e,t){return a.service.post("/login",{username:e,password:t}).then((function(e){return e.data}))},this.upload=function(e){var t=new FormData;return t.append("image",e),a.service.put("/upload",t).then((function(e){return e.data}))},this.edit=function(e,t,n){return a.service.put("/edit",{username:e,campus:t,course:n}).then((function(e){return e.data}))},this.loggedin=function(){return a.service.get("/loggedin").then((function(e){return e.data}))},this.infoUser=function(){return a.service.get("/info-user/").then((function(e){return e.data}))},this.logout=function(){return a.service.post("/logout",{}).then((function(e){return e.data}))};var t=f.a.create({baseURL:"https://kokomo-react.herokuapp.com/api/auth",withCredentials:!0});this.service=t},U=function(e){Object(S.a)(t,e);var a=Object(R.a)(t);function t(e){var n;return Object(g.a)(this,t),(n=a.call(this,e)).handleSubmit=function(e){e.preventDefault();var a={user:n.state.user,password:n.state.password};n.service.login(a.user,a.password).then((function(e){n.setState({user:"",password:""}),n.props.callback(e),n.props.history.push("/")})).catch((function(e){return console.log(e)}))},n.handleChange=function(e){n.setState(Object(F.a)({},e.target.name,e.target.value))},n.state={user:"",password:""},n.service=new T,n}return Object(I.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"row align-middle  justify-content-center p-4",style:{minHeight:"100vh"}},r.a.createElement("div",{className:"col-sm-12 col-md-4 align-self-center"},r.a.createElement("h2",{className:"hero-title text-center mb-4"},"Iniciar sesi\xf3n"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"user",className:"label active"},"Nombre de usuario"),r.a.createElement("input",{type:"text",name:"user",value:this.state.user,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password",className:"label active"},"Contrase\xf1a"),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange})),r.a.createElement("button",{type:"submit",className:"btn-kokomo btn-kokomo-success btn-block p-3"},"Iniciar sesi\xf3n")),r.a.createElement("a",{href:"https://kokomo-react.herokuapp.com/api/auth/google",className:"btn-kokomo btn-kokomo-google btn-block p-3 mt-4"}," ",r.a.createElement("img",{src:"/images/google.svg",alt:"Google logo",style:{width:"20px",marginRight:"8px"}})," ","Iniciar sesi\xf3n con Google"))))}}]),t}(n.Component),H=function(e){Object(S.a)(t,e);var a=Object(R.a)(t);function t(e){var n;return Object(g.a)(this,t),(n=a.call(this,e)).service=new T,n}return Object(I.a)(t,[{key:"eraseLocalStorage",value:function(){localStorage.clear()}},{key:"render",value:function(){var e=this;return this.eraseLocalStorage(),this.service.logout().then((function(a){e.props.callback(null),e.props.reset()})).catch((function(e){return console.log(e)})),r.a.createElement(s.a,{to:"/"})}}]),t}(n.Component),P=function(e){Object(S.a)(t,e);var a=Object(R.a)(t);function t(e){var n;return Object(g.a)(this,t),(n=a.call(this,e)).handleSubmit=function(e){e.preventDefault();var a={user:n.state.user,password:n.state.password,telNumber:n.state.telNumber,email:n.state.email};n.service.signup(a.user,a.password,a.telNumber,a.email).then((function(e){n.setState({user:"",password:"",telNumber:"",email:""}),n.props.callback(e),n.props.history.push("/profile")})).catch((function(e){return console.log(e)}))},n.handleChange=function(e){n.setState(Object(F.a)({},e.target.name,e.target.value))},n.state={user:"",email:"",telNumber:"",password:""},n.service=new T,n}return Object(I.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"row align-middle  justify-content-center p-4",style:{"min-height":"100vh"}},r.a.createElement("div",{className:"col-sm-12 col-md-4 align-self-center"},r.a.createElement("h2",{className:"hero-title text-center mb-4"},"Crea tu cuenta"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"user",className:"label active"},"Nombre de usuario"),r.a.createElement("input",{type:"text",name:"user",value:this.state.user,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"telNumber",className:"label active"},"N\xfamero de tel\xe9fono"),r.a.createElement("input",{type:"number",name:"telNumber",value:this.state.telNumber,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email",className:"label active"},"Email"),r.a.createElement("input",{type:"email",name:"email",value:this.state.email,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password",className:"label active"},"Contrase\xf1a"),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange})),r.a.createElement("button",{type:"submit",className:"btn-kokomo btn-kokomo-success btn-block p-3"},"Registrarme")),r.a.createElement("a",{href:"https://kokomo-react.herokuapp.com/api/auth/google",className:"btn-kokomo btn-kokomo-google btn-block p-3 mt-4"},r.a.createElement("img",{src:"/images/google.svg",alt:"Google logo",style:{width:"20px",marginRight:"8px"}})," ","Registrarme con Google"))))}}]),t}(n.Component),_=function(e){Object(S.a)(t,e);var a=Object(R.a)(t);function t(e){var n;return Object(g.a)(this,t),(n=a.call(this,e)).handleSubmit=function(e){e.preventDefault();var a={user:n.state.user,password:n.state.password,telNumber:n.state.telNumber,email:n.state.email};n.service.signupLocal(a.user,a.password,a.telNumber,a.email).then((function(e){n.setState({user:"",password:"",telNumber:"",email:""}),n.props.callback(e),n.props.history.push("/profile")})).catch((function(e){return console.log(e)}))},n.handleChange=function(e){n.setState(Object(F.a)({},e.target.name,e.target.value))},n.state={user:"",email:"",telNumber:"",password:""},n.service=new T,n}return Object(I.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"row align-middle  justify-content-center p-4",style:{"min-height":"100vh"}},r.a.createElement("div",{className:"col-sm-12 col-md-4 align-self-center"},r.a.createElement("h2",{className:"hero-title text-center mb-4"},"Crea tus locales"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"user",className:"label active"},"Nombre de usuario"),r.a.createElement("input",{type:"text",name:"user",value:this.state.user,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"telNumber",className:"label active"},"N\xfamero de tel\xe9fono"),r.a.createElement("input",{type:"number",name:"telNumber",value:this.state.telNumber,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email",className:"label active"},"Email"),r.a.createElement("input",{type:"email",name:"email",value:this.state.email,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password",className:"label active"},"Contrase\xf1a"),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange})),r.a.createElement("button",{type:"submit",className:"btn-kokomo btn-kokomo-success btn-block p-3"},"Registrarme")),r.a.createElement("a",{href:"/auth/google",className:"btn-kokomo btn-kokomo-google btn-block p-3 mt-4"},r.a.createElement("img",{src:"/images/google.svg",alt:"Google logo",style:{width:"20px",marginRight:"8px"}})," ","Registrarme con Google"))))}}]),t}(n.Component),A=t(67),L=function e(){var a=this;Object(g.a)(this,e),this.sendMessage=function(e,t){return a.service.post("/send-message/"+e,t)},this.deleteMessage=function(e){return a.service.post("/delete/"+e).then((function(e){return e.data}))},this.editPhone=function(e){return a.service.post("/editTelephone",e).then((function(e){return e.data}))},this.addOwner=function(e){return a.service.post("/add-owner").then((function(e){return e.data}))};var t=f.a.create({baseURL:"https://kokomo-react.herokuapp.com/api/profile",withCredentials:!0});this.service=t},M=new L,B=new T,q={messages:[]},G=function(){var e=Object(n.useState)(q),a=Object(o.a)(e,2),t=a[0],l=a[1];Object(n.useEffect)((function(){var e=f.a.CancelToken.source();return function(){try{B.loggedin().then((function(e){e.messages&&l((function(a){return Object(u.a)(Object(u.a)({},a),{},{user:e,messages:e.messages,message:!1})}))}))}catch(e){if(!f.a.isCancel(e))throw e;console.log("cancelled")}}(),function(){e.cancel()}}),[]);var c=function(e){M.deleteMessage(e.target.messageId.value).then((function(e){console.log(e)}))},s=r.a.createElement("div",{className:"text-center"},r.a.createElement("img",{src:"/images/bell-muted.png",className:"black-white",alt:"Sin notificaciones"}),r.a.createElement("p",null,"No tienes notificaciones pendientes"));return t.messages.length&&(s=t.messages.map((function(e,a){return r.a.createElement("div",{className:"border-top pb-3 pt-3",key:a},r.a.createElement("form",{onSubmit:c,className:"float-right"},r.a.createElement("input",{type:"hidden",value:e._id,name:"messageId"}),r.a.createElement("button",{className:"close-btn-2"},r.a.createElement("i",{className:"fas fa-times"}))),r.a.createElement(A.a,{variant:"info"},e.topic),r.a.createElement("p",null,e.message))}))),r.a.createElement("div",null,s)},z=t(108),K=new E,Y=r.a.createElement(r.a.Fragment,null),V=r.a.createElement(r.a.Fragment,null),J={alert:!1},W=function(e){var a=Object(n.useState)(J),t=Object(o.a)(a,2),l=t[0],c=t[1],s=function(){e.property.bookings.length?c(Object(u.a)(Object(u.a)({},l),{},{alert:!0})):K.deleteProperty(e.property._id).then((function(e){window.location.reload(!1)}))};return l.alert&&(V=r.a.createElement("tr",null,r.a.createElement("td",{colspan:"3"},r.a.createElement(z.a,{variant:"warning"},"Por favor, cancele todos las reservas de este local primero."," ",r.a.createElement(m.b,{to:"/my-bookings"},"Ver reservas"))))),e.property&&(Y=r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("img",{src:e.property.mainImage,className:"mini-kokomo",alt:e.property.name})),r.a.createElement("td",null,r.a.createElement(m.b,{to:"/my-bookings"},r.a.createElement("h2",{className:"title-profile"},e.property.name),r.a.createElement("p",{className:"mdi mdi-calendar"}," ",e.property.bookings?e.property.bookings.length:"0"," reservas"))),r.a.createElement("td",{className:"text-right"},r.a.createElement(m.b,{type:"submit",className:"btn-kokomo-circle btn-kokomo-grey mr-2",to:"/property/edit/"+e.property._id},r.a.createElement("i",{className:"mdi mdi-square-edit-outline"})),r.a.createElement("button",{type:"submit",className:"btn-kokomo-circle btn-kokomo-danger",onClick:function(){return s()}},r.a.createElement("i",{className:"far fa-trash-alt"})))),V)),r.a.createElement(r.a.Fragment,null,Y)},$=new T,Q=new L,Z={showConfig:!1,user:{avatar:"",bookings:[],favourites:[],owner:!1,ownProperties:[],_id:"",username:"",email:"",messages:[],telNumber:""}},X=function(e){var a=Object(n.useState)(Z),t=Object(o.a)(a,2),l=t[0],c=t[1];Object(n.useEffect)((function(){$.infoUser().then((function(e){c((function(a){return Object(u.a)(Object(u.a)({},a),{},{user:e})}))}))}),[e.loggedInUser._id]);var s=r.a.createElement(r.a.Fragment,null),i=0;l.user&&l.user.ownProperties&&(s=l.user.ownProperties.map((function(e,a){return r.a.createElement(W,{key:a,property:e})})),l.user.ownProperties.map((function(e){return e.bookings&&(i+=e.bookings.length),i})));var p=r.a.createElement(r.a.Fragment,null);return l.showConfig&&(p=r.a.createElement("div",{className:"text-center d-flex align-items-center justify-content-center kokomo-popup"},r.a.createElement("div",{className:"row align-middle justify-content-center w-100"},r.a.createElement("div",{className:"col-md-4 align-self-center fondo-kokomo"},r.a.createElement("img",{src:"/images/config.png",className:"emoji-img",alt:"Horas disponibles"}),r.a.createElement("button",{onClick:function(){c(Object(u.a)(Object(u.a)({},l),{},{showConfig:!1}))},className:"close-btn"},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement("p",{className:"mb-3"},"No puedes modificar tu nombre de usuario ni tu correo"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a={telNumber:l.user.telNumber};Q.editPhone(a).then((function(e){c(Object(u.a)(Object(u.a)({},l),{},{showConfig:!1}))}))}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"telNumber",className:"label active"},"Tel\xe9fono"),r.a.createElement("input",{type:"text",name:"telNumber",value:l.user.telNumber,onChange:function(e){c(Object(u.a)(Object(u.a)({},l),{},{user:Object(u.a)(Object(u.a)({},l.user),{},{telNumber:e.target.value})}))}})),r.a.createElement("div",null,r.a.createElement("input",{type:"submit",value:"Guardar cambios",className:"btn-kokomo btn-kokomo-success w-100",style:{padding:"19px"}}))))))),r.a.createElement("div",{style:{backgroundColor:"#f8fafb",minHeight:"100vh"}},r.a.createElement("div",{className:"body-container",style:{marginTop:"0",paddingTop:"10px",paddingBottom:"50px",marginBottom:"0px"}},r.a.createElement("h3",{className:"section-title mt-4 mdi mdi-account-circle"}," ","Mi perfil"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"card-kokomo"},r.a.createElement("div",{className:"beach-background"},r.a.createElement("div",{className:"text-right"},r.a.createElement("button",{onClick:function(){c(Object(u.a)(Object(u.a)({},l),{},{showConfig:!0}))},className:"btn-kokomo-circle btn-kokomo-white"},r.a.createElement("i",{className:"mdi mdi-account-edit"})))),r.a.createElement("div",{className:"text-center",style:{borderRadius:"26px 26px 0 0",marginTop:"-30px",backgroundColor:"white",paddingBottom:"30px"}},r.a.createElement("img",{src:l.user.avatar,alt:"Avatar",className:"avatar"}),r.a.createElement("h2",{className:"title-profile"},e.loggedInUser.username),r.a.createElement("p",null,l.user.email),r.a.createElement("p",null,l.user.telNumber?"".concat(l.user.telNumber):" "),l.user.owner?"":r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"border-top mt-4 pt-4"},r.a.createElement("button",{onClick:function(e){Q.addOwner().then((function(e){c(Object(u.a)(Object(u.a)({},l),{},{user:Object(u.a)(Object(u.a)({},l.user),{},{owner:!0})}))}))},className:"logout-kokomo"},"Tengo un local"))),r.a.createElement("div",{className:"border-top mt-4 pt-4"},r.a.createElement(m.b,{to:"/logout",className:"logout-kokomo"},r.a.createElement("i",{className:"mdi mdi-logout-variant"})," Cerrar sesi\xf3n")))),l.user.owner?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-kokomo",style:{padding:"20px",marginTop:"30px"}},r.a.createElement(m.b,{to:"/property/create-property",className:"btn-kokomo-circle btn-kokomo-success float-right"},r.a.createElement("i",{className:"mdi mdi-plus"})),r.a.createElement("h2",{className:"title-search-home"}," Mis locales"),r.a.createElement("table",{className:"table mt-4"},r.a.createElement("tbody",null,s)))):r.a.createElement("div",{className:"card-kokomo",style:{padding:"20px",marginTop:"30px"}},r.a.createElement(m.b,{to:"/search",className:"btn-kokomo-circle btn-kokomo-success float-right"},r.a.createElement("i",{className:"mdi mdi-plus"})),r.a.createElement("h2",{className:"title-search-home"}," Mi \xfaltima reserva"),l.user.bookings.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(A.a,{variant:"info"},l.user.bookings[l.user.bookings.length-1].bookingRef),r.a.createElement("p",null,r.a.createElement("i",{className:"far fa-calendar-alt"})," D\xeda:"," ",l.user.bookings[l.user.bookings.length-1].day),r.a.createElement("p",null,r.a.createElement("i",{className:"far fa-clock"})," Hora:"," ",l.user.bookings[l.user.bookings.length-1].time),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-users"})," N\xfamero de personas:"," ",l.user.bookings[l.user.bookings.length-1].guests))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"text-center"},r.a.createElement("img",{src:"/images/calendar.png",className:"black-white",alt:"Sin reservas"}),r.a.createElement("p",null,"Todav\xeda no tienes reservas"))))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"card-kokomo",style:{padding:"20px",backgroundColor:"#207190"}},r.a.createElement("h3",{className:"datos-kokomo"},l.user.owner?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,i),"Reservas"):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,l.user.bookings.length),"Reservas"))),r.a.createElement("div",{className:"card-kokomo",style:{padding:"20px",marginTop:"30px",backgroundColor:"#3394ba"}},r.a.createElement("h3",{className:"datos-kokomo"},l.user.owner?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,l.user.ownProperties.length),"Locales"):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,l.user.favourites.length),"Favoritos"))),r.a.createElement("div",{className:"card-kokomo",style:{padding:"20px",marginTop:"30px"}},r.a.createElement("h2",{className:"title-search-home"},"Notificaciones"),r.a.createElement(G,null))))),p)},ee=t(109),ae=JSON.parse(localStorage.saveData||null)||{};function te(){return ae.obj}var ne=function(e){var a=e.component,t=e.user,n=e.callback,l=Object(ee.a)(e,["component","user","callback"]);return r.a.createElement(s.b,Object.assign({},l,{render:function(e){return t?(console.log("user2",t),r.a.createElement(a,Object.assign({},e,{loggedInUser:t,callback:n}))):void 0!==te()?r.a.createElement(a,Object.assign({},e,{loggedInUser:te(),callback:n})):r.a.createElement(s.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},re=t(175),le=t(13),ce=t(10),oe=t(182),se=t(178),me=t(181),ie=(t(103),t(105)),ue=t.n(ie),pe=t(104),de=t.n(pe),ge=t(106),be=t.n(ge),fe=t(177),Ee=t(180),ve=t(179);Object(re.a)({root:{color:"#eaeaf0",display:"flex",height:22,alignItems:"center"},active:{color:"#784af4"},circle:{width:8,height:8,borderRadius:"50%",backgroundColor:"currentColor"},completed:{color:"#784af4",zIndex:1,fontSize:18}});var he=Object(le.a)({alternativeLabel:{top:22},active:{"& $line":{backgroundImage:"linear-gradient( 95deg,#ffba69 0%,#ffba69 50%,#ffba69 100%)"}},completed:{"& $line":{backgroundImage:"linear-gradient( 95deg,#ffba69 0%,#ffba69 50%,#ffba69 100%)"}},line:{height:3,border:0,backgroundColor:"#eaeaf0",borderRadius:1}})(fe.a),ke=Object(re.a)({root:{backgroundColor:"#ccc",zIndex:1,color:"#fff",width:50,height:50,display:"flex",borderRadius:"50%",justifyContent:"center",alignItems:"center"},active:{backgroundImage:"linear-gradient( 136deg, #ffba69 0%, #ec9834 50%, #cc7309 100%)",boxShadow:"0 4px 10px 0 rgba(0,0,0,.25)"},completed:{backgroundImage:"linear-gradient( 136deg, #ffba69 0%, #ec9834 50%, #cc7309 100%)"}});function Ne(e){var a,t=ke(),n=e.active,l=e.completed,c={1:r.a.createElement(de.a,null),2:r.a.createElement(ue.a,null),3:r.a.createElement(be.a,null)};return r.a.createElement("div",{className:Object(ce.a)(t.root,(a={},Object(F.a)(a,t.active,n),Object(F.a)(a,t.completed,l),a))},c[String(e.icon)])}var ye=Object(re.a)((function(e){return{root:{width:"100%"},button:{marginRight:e.spacing(1)},buttonActive:{backgroundColor:"#3294bb",color:"#ffffff"},buttonSuccess:{backgroundColor:"#28a745",color:"#ffffff"},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}})),je=function(e){var a=ye(),t=r.a.useState(0),n=Object(o.a)(t,2),l=n[0],c=n[1],s=e.stepsTitles;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:a.root},r.a.createElement(oe.a,{alternativeLabel:!0,activeStep:l,connector:r.a.createElement(he,null)},s.map((function(e,a){return r.a.createElement(se.a,{key:a},r.a.createElement(me.a,{StepIconComponent:Ne},e))}))),r.a.createElement("div",null,l===s.length?r.a.createElement("div",null,r.a.createElement(ve.a,{className:a.instructions,component:"div"},"All steps completed - you're finished"),r.a.createElement(Ee.a,{onClick:function(){c(0)},className:a.button},"Reset")):r.a.createElement("div",null,r.a.createElement(ve.a,{className:a.instructions,component:"div"},function(a){switch(a){case 0:return e.allSteps[0];case 1:return e.allSteps[1];case 2:return e.allSteps[2];default:return"Unknown step"}}(l)),r.a.createElement("div",{className:"text-center mt-5"},r.a.createElement(Ee.a,{disabled:0===l,onClick:function(){c((function(e){return e-1}))},className:a.button},"Anterior"),l===s.length-1?r.a.createElement(Ee.a,{variant:"contained",color:"#3294bb",onClick:e.handleSubmit,className:a.buttonSuccess},"Crear propiedad"):r.a.createElement(Ee.a,{variant:"contained",onClick:function(){c((function(e){return e+1}))},className:a.buttonActive},"Siguiente"))))))},we=function e(){var a=this;Object(g.a)(this,e),this.searchLocation=function(e){return a.service.get("/maps?search="+e).then((function(e){return e.data}))},this.getAvailability=function(e){return a.service.post("/getAvailability",e).then((function(e){return e.data}))},this.getPropertyAvailability=function(e,t){return a.service.post("/getAvailability/"+e,t).then((function(e){return e.data}))};var t=f.a.create({baseURL:"https://kokomo-react.herokuapp.com/api/search",withCredentials:!0});this.service=t},Oe=new E,xe=new we,Ce={name:"",description:"",categories:[],mainImage:null,location:{name:"",lat:0,long:0},openingHours:[{openingDays:{openingDay:null,closingDay:null},weekDays:[],openingTimes:[{openingTime:0,closingTime:0}]}],bookingDuration:0,availablePlaces:0};var De=function(){var e=Object(s.g)(),a=Object(n.useState)(Ce),t=Object(o.a)(a,2),l=t[0],c=t[1],p=function(e){c(Object(u.a)(Object(u.a)({},l),{},Object(F.a)({},e.target.name,e.target.value)))},d=function(e){var a=Object(i.a)(l.openingHours);if(a[0].weekDays.includes(parseInt(e.target.value))){var t=a[0].weekDays.indexOf(parseInt(e.target.value));a[0].weekDays.splice(t,1)}else a[0].weekDays.push(parseInt(e.target.value));c(Object(u.a)(Object(u.a)({},l),{},{openingHours:a}))},g=[r.a.createElement("p",null,"Datos principales"),r.a.createElement("p",null,"Horarios"),r.a.createElement("p",null,"El local")],b=[r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 col-md-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name",className:"label active"},"Nombre"),r.a.createElement("input",{type:"text",name:"name",value:l.name,onChange:p})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"imageUrl",className:"label active"},"Imagen"),r.a.createElement("input",{type:"file",name:"imageUrl",onChange:function(e){e.preventDefault();var a=new FormData;a.append("mainImage",e.target.files[0]),Oe.uploadPicture(a).then((function(e){c(Object(u.a)(Object(u.a)({},l),{},{mainImage:e.path}))}))}}))),r.a.createElement("div",{className:"col-sm-12 col-md-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"description",className:"label active"},"Descripci\xf3n"),r.a.createElement("input",{type:"textarea",name:"description",value:l.description,onChange:p})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"categories",className:"label active"},"Categor\xeda"),r.a.createElement("input",{list:"categories",type:"categories",id:"input-categories",name:"categories",onChange:p}),r.a.createElement("datalist",{id:"categories"},r.a.createElement("option",{value:"Chillout"}),r.a.createElement("option",{value:"Surfer"}),r.a.createElement("option",{value:"Restaurante"}),r.a.createElement("option",{value:"Discoteca"}),r.a.createElement("option",{value:"Bar"})))))),r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 col-md-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"openingDay",className:"label active"},"D\xeda de apertura"),r.a.createElement("input",{type:"date",name:"openingDay",value:l.openingHours[0].openingDays.openingDay,onChange:function(e){var a=Object(i.a)(l.openingHours);a[0].openingDays.openingDay=e.target.value,c(Object(u.a)(Object(u.a)({},l),{},{openingHours:a}))}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"closingDay",className:"label active"},"D\xeda de cierre"),r.a.createElement("input",{type:"date",name:"closingDay",value:l.openingHours[0].openingDays.closingDay,onChange:function(e){var a=Object(i.a)(l.openingHours);a[0].openingDays.closingDay=e.target.value,c(Object(u.a)(Object(u.a)({},l),{},{openingHours:a}))}})),r.a.createElement("h6",null,"D\xedas de la semana"),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-6"},r.a.createElement("div",{className:"custom-control custom-checkbox"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",name:"monday",value:1,onChange:d}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"monday"},"Lunes")),r.a.createElement("div",{className:"custom-control custom-checkbox"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",name:"tuesday",value:2,onChange:d}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"tuesday"},"Martes")),r.a.createElement("div",{className:"custom-control custom-checkbox"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",name:"wednesday",value:3,onChange:d}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"wednesday"},"Mi\xe9rcoles")),r.a.createElement("div",{className:"custom-control custom-checkbox"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",name:"thursday",value:4,onChange:d}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"thursday"},"Jueves"))),r.a.createElement("div",{className:"col-6"},r.a.createElement("div",{className:"custom-control custom-checkbox"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",name:"friday",value:5,onChange:d}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"friday"},"Viernes")),r.a.createElement("div",{className:"custom-control custom-checkbox"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",name:"saturday",value:6,onChange:d}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"saturday"},"S\xe1bado")),r.a.createElement("div",{className:"custom-control custom-checkbox"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",name:"sunday",value:0,onChange:d}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"sunday"},"Domingo")))))),r.a.createElement("div",{className:"col-sm-12 col-md-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"openingHours",className:"label active"},"Hora de apertura"),r.a.createElement("input",{type:"number",name:"openingHours",value:l.openingHours[0].openingTimes[0].openingTime,onChange:function(e){var a=Object(i.a)(l.openingHours);a[0].openingTimes[0].openingTime=e.target.value,c(Object(u.a)(Object(u.a)({},l),{},{openingHours:a}))}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"closingHours",className:"label active"},"Hora de cierre"),r.a.createElement("input",{type:"number",name:"closingHours",value:l.openingHours[0].openingTimes[0].closingTime,onChange:function(e){var a=Object(i.a)(l.openingHours);a[0].openingTimes[0].closingTime=e.target.value,c(Object(u.a)(Object(u.a)({},l),{},{openingHours:a}))}}))))),r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 col-md-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"bookingDuration",className:"label active"},"Duraci\xf3n de la reserva (en minutos)"),r.a.createElement("input",{type:"number",name:"bookingDuration",value:l.bookingDuration,onChange:p})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"availablePlaces",className:"label active"},"Plazas"),r.a.createElement("input",{type:"number",name:"availablePlaces",value:l.availablePlaces,onChange:p}))),r.a.createElement("div",{className:"col-sm-12 col-md-6"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),xe.searchLocation(l.search).then((function(e){c(Object(u.a)(Object(u.a)({},l),{},{search:e.candidates[0].name,location:{lat:e.candidates[0].geometry.location.lat,long:e.candidates[0].geometry.location.lng,name:e.candidates[0].formatted_address}}))}))},className:"d-flex"},r.a.createElement("div",{className:"form-group",style:{width:"80%"}},r.a.createElement("label",{htmlFor:"search",className:"label active"},"Direcci\xf3n"),r.a.createElement("input",{type:"text",name:"search",value:l.search,onChange:p})),r.a.createElement("div",{style:{width:"20%"}},r.a.createElement("input",{type:"submit",value:"Buscar",className:"btn-kokomo-flex",style:{padding:"19px"}}))),r.a.createElement("p",null,"Candidato: ",l.search),r.a.createElement("p",null,"Direcci\xf3n:",l.location.name),r.a.createElement("p",null,"Latitud:",l.location.lat),r.a.createElement("p",null,"Longitud:",l.location.long))))];return r.a.createElement("div",{className:"container mt-4"},r.a.createElement(m.b,{to:"/"},r.a.createElement("div",null,r.a.createElement("span",{className:"fa-stack fa-2x kokomo-back-button"},r.a.createElement("i",{className:"fas fa-circle fa-stack-2x circle-back"}),r.a.createElement("i",{className:"fas fa-arrow-left fa-stack-1x fa-inverse arrow-back"})))),r.a.createElement("div",{className:"hero"},r.a.createElement("h2",{className:"hero-title text-center"},"Crea tu local")),r.a.createElement(je,{allSteps:b,stepsTitles:g,handleSubmit:function(a){a.preventDefault();var t={name:l.name,description:l.description,categories:l.categories,location:{name:l.location.name,lat:l.location.lat,long:l.location.long},openingHours:Object(i.a)(l.openingHours),bookingDuration:l.bookingDuration,availablePlaces:l.availablePlaces,mainImage:l.mainImage};Oe.createProperty(t).then((function(a){e.push("/")})).catch((function(e){return console.log(e)}))}}))},Fe=function e(){var a=this;Object(g.a)(this,e),this.createBooking=function(e,t){return a.service.post("/create-booking/"+e,t).then((function(e){return e.data}))},this.myBookings=function(){return a.service.get("/my-bookings").then((function(e){return e.data}))},this.propertiesBookings=function(){return a.service.get("/my-properties-bookings").then((function(e){return e.data}))},this.bookingDetails=function(e){return a.service.get("/details/"+e).then((function(e){return e.data}))},this.deleteBooking=function(e){return a.service.post("/delete/"+e).then((function(e){return e.data}))};var t=f.a.create({baseURL:"https://kokomo-react.herokuapp.com/api/booking",withCredentials:!0});this.service=t},Ie=new Fe,Se=function(e){var a=e.results,t=Object(s.g)(),n="No results",l=function(e){e.preventDefault();var a={scheduleId:e.target.scheduleId.value},n={day:e.target.day.value,guests:e.target.guests.value};Ie.createBooking(a.scheduleId,n).then((function(e){t.push("/my-bookings")}))};return a[0].property&&(n=a.map((function(e,a){return r.a.createElement("div",{className:"one-property",key:a},r.a.createElement("a",{href:"/property/"+e.property._id},r.a.createElement("div",{className:"property-card"},r.a.createElement("span",{className:"fa-stack fa-2x float-right heart-home"},r.a.createElement("i",{className:"fas fa-circle fa-stack-2x orange-80"}),r.a.createElement("i",{className:"fas fa-heart fa-stack-1x fa-inverse"})),r.a.createElement("div",null,r.a.createElement("img",{src:e.property.mainImage,style:{zIndex:"1"},alt:e.property.name}),r.a.createElement("img",{src:e.property.mainImage,className:"blur-image",alt:e.property.name})))),r.a.createElement("div",{className:"search-pc"},r.a.createElement("h3",null,e.property.name),r.a.createElement("p",{className:"mdi mdi-map-marker-radius"},e.property.location.name),r.a.createElement("div",{className:"row mt-3 ml-2 mb-4"},e.timeboxes.map((function(a,t){return r.a.createElement("form",{onSubmit:l,key:t},r.a.createElement("input",{type:"hidden",name:"scheduleId",value:a._id}),r.a.createElement("input",{type:"hidden",name:"day",value:a.day}),r.a.createElement("input",{type:"hidden",name:"guests",value:e.guests}),r.a.createElement("input",{type:"submit",className:"kokomo-hours",value:a.startTime}))})))))}))),r.a.createElement("div",{className:"container"},r.a.createElement("h3",{className:"mt-4 mb-4 section-title"},"Resultados de tu b\xfasqueda"),r.a.createElement("div",{className:"properties-group-2"},n))},Re=t(57),Te=t.n(Re),Ue=new we,He=new Date;He.setDate(He.getDate());var Pe={bookingDate:He.toISOString().substr(0,10),numberGuests:0,availableResults:[]},_e=function(e){var a=Object(n.useState)(Pe),t=Object(o.a)(a,2),l=t[0],c=t[1],s=function(e){c(Object(u.a)(Object(u.a)({},l),{},Object(F.a)({},e.target.name,e.target.value)))},m=r.a.createElement(r.a.Fragment,null);return l.availableResults.length&&(m=r.a.createElement(Se,{results:l.availableResults})),r.a.createElement("div",{className:"body-container"},r.a.createElement("div",null,r.a.createElement("h3",{className:"section-title mt-4 mdi mdi-magnify"}," ","Busca el mejor sitio"),r.a.createElement(j,null)),r.a.createElement("div",null,r.a.createElement("div",{className:"row d-flex align-items-center justify-content-center mt-5"},r.a.createElement("form",{className:"form-row flotante-kokomo-search",onSubmit:function(e){e.preventDefault();var a={bookingDate:l.bookingDate,numberGuests:l.numberGuests};Ue.getAvailability(a).then((function(e){c(Object(u.a)(Object(u.a)({},l),{},{availableResults:e}))}))}},r.a.createElement("div",{className:"row w-100"},r.a.createElement("div",{className:"col-40"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"bookingDate",className:"label active"},"\xbfQu\xe9 d\xeda quieres venir?"),r.a.createElement("input",{type:"date",name:"bookingDate",onChange:s,value:l.bookingDate,"data-date-format":"DD MMMM YYYY"}))),r.a.createElement("div",{className:"col-40"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"numberGuests",className:"label active"},"\xbfCu\xe1ntos ser\xe9is?"),r.a.createElement("input",{type:"number",name:"numberGuests",min:"1",onChange:s,value:l.numberGuests,className:"kokomo-input"}))),r.a.createElement("div",{className:"col-20"},r.a.createElement("button",{type:"submit",className:"kokomo-btn-form"},r.a.createElement(Te.a,null)))))),r.a.createElement("div",null,m)))},Ae=t(79),Le=t(42),Me=new Fe,Be=function(e){var a={availableResults:e.results,guests:e.guests,bookingFinished:!1,bookingId:0,day:"",hour:""},t=Object(n.useState)(a),l=Object(o.a)(t,2),c=l[0],s=l[1],i="No hay horas disponibles para tu b\xfasqueda",p=function(e){e.preventDefault();var a={scheduleId:e.target.scheduleId.value},t={day:e.target.day.value,guests:e.target.guests.value};Me.createBooking(a.scheduleId,t).then((function(e){s(Object(u.a)(Object(u.a)({},c),{},{bookingFinished:!0,bookingId:e._id,day:e.day,hour:e.time}))}))};c.availableResults&&(i=c.availableResults.map((function(e){return r.a.createElement("div",{className:"col-auto mb-3"},r.a.createElement("form",{onSubmit:p},r.a.createElement("input",{type:"hidden",name:"scheduleId",value:e._id}),r.a.createElement("input",{type:"hidden",name:"day",value:e.day}),r.a.createElement("input",{type:"hidden",name:"guests",value:c.guests}),r.a.createElement("input",{type:"submit",className:"kokomo-hours",value:e.startTime})))})));var d="whatsapp://send?text=\xa1Te espera una reserva de Kokomo! \ud83d\ude0e Aqu\xed tienes los detalles: http://kokomo-react.herokuapp.com/#/booking/details/".concat(c.bookingId),g=r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:"/images/3.png",className:"emoji-img",alt:"Reserva creada con \xe9xito"}),r.a.createElement("h2",{className:"subtitle-landing text-center mb-3"},"\xa1Reserva creada con \xe9xito!"),r.a.createElement("p",null,r.a.createElement("i",{className:"far fa-calendar-alt"})," D\xeda: ",c.day),r.a.createElement("p",null,r.a.createElement("i",{className:"far fa-clock"})," Hora: ",c.hour),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-users"})," N\xfamero de personas: ",c.guests),r.a.createElement("a",{href:d,className:"btn-kokomo btn-kokomo-grey mt-4 mr-2 p-3"},"Compartir reserva por WhatsApp"),r.a.createElement(m.b,{to:"/",className:"btn-kokomo btn-kokomo-grey mt-4 ml-2 p-3"},"Volver a inicio")),b=r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:"/images/calendar.png",className:"emoji-img",alt:"Horas disponibles"}),r.a.createElement("button",{onClick:e.clearAvailableTimes,className:"close-btn"},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement("h2",{className:"subtitle-landing text-center mb-3"},"Horas disponibles"),r.a.createElement("div",{className:"row justify-content-center"},i));return c.bookingFinished&&(b=g),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"text-center d-flex align-items-center justify-content-center kokomo-popup"},r.a.createElement("div",{className:"row align-middle justify-content-center w-100"},r.a.createElement("div",{className:"col-md-4 align-self-center fondo-kokomo"},b))))},qe=function(e){var a=new Date;a.setDate(a.getDate());var t;t={lat:e.lat,lng:e.lng};var n=function(e){var a=new Date,t=new Date(e.openingHours[0].openingDays.openingDay),n=new Date(e.openingHours[0].openingDays.closingDay);return'\n    <div>\n    <a href="/#/property/'.concat(e._id,'" class="btn-kokomo btn-kokomo-danger" style="font-size: 16px;">\n    ').concat(e.name,'\n    </a>\n\n    <div style="font-size: 14px;">\n        <span style="color: grey;">Nota:\n        ').concat(function(e){var a=e.counter;if(e.counter.length){return parseFloat((a.reduce((function(e,a){return e+a}),0)/a.length).toFixed(2))}return"Sin evaluaciones"}(e.rating),'\n        </span>\n      <div style="font-size: 14px; color: grey;">Categor\xeda:\n        ').concat(e.categories[0],'\n      </div>\n      <div style="font-size: 14px; color: grey;">\n        ').concat("$".repeat(e.price_level),'\n      </div>\n      <div style="font-size: 14px; color: green;">\n        ').concat(t.getTime()<=a.getTime()&&a.getTime()<=n.getTime()?"Abierto":"Cerrado","\n      </div>\n    </div>")};return r.a.createElement("div",{className:"container mapa"},r.a.createElement(N.a,{bootstrapURLKeys:{key:"AIzaSyC2gU3A4p3BVUlocsx-HJtJ8Wjar2aof9Y",language:"sp"},center:t,defaultZoom:11,options:function(e){return{disableDefaultUI:!1,mapTypeControl:!0,streetViewControl:!0,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"on"}]}]}},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(a){return function(e,a,t){var r=[],l=[];r.push(new a.Marker({position:{lat:t.location.lat,lng:t.location.long},map:e})),l.push(new a.InfoWindow({content:n(t)})),r.forEach((function(a,t){a.addListener("click",(function(){l[t].open(e,a)}))}))}(a.map,a.maps,e.property)}}))},Ge=t(90),ze=t.n(Ge),Ke=function(e){var a={size:12,count:5,color:"#174e67",activeColor:"#174e67",a11y:!0,isHalf:!0,emptyIcon:r.a.createElement("i",{className:"far fa-star"}),halfIcon:r.a.createElement("i",{className:"fa fa-star-half-alt",style:{color:"#174e67"}}),filledIcon:r.a.createElement("i",{className:"fa fa-star"}),edit:!1,value:e.rate};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex"},r.a.createElement(d.a,a),r.a.createElement("p",{className:"text-review"},e.numberReviews," ",1===e.numberReviews?"rese\xf1a":"rese\xf1as")))},Ye=function(e){var a={size:12,count:5,color:"#ffba69",activeColor:"#ffba69",value:e.ratingComment,a11y:!0,isHalf:!0,emptyIcon:r.a.createElement("i",{className:"far fa-star"}),halfIcon:r.a.createElement("i",{className:"fa fa-star-half-alt"}),filledIcon:r.a.createElement("i",{className:"fa fa-star"}),onChange:function(a){e.handleChangeRating(a)}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,a))},Ve=new E,Je=new we,We={property:{name:"",location:{name:"",lat:41.393542,lng:2.203153},rating:{counter:[4]},openingHours:[{openingDays:{openingDay:"",closingDay:""},openingTimes:[{openingTime:0,closingTime:0}],weekDays:[]}],bookings:[],comments:[{username:"",comment:""}]},availableResults:[],comment:"",favourites:[],ratingComment:0,showFormMobile:!1},$e=function(e){var a=Object(n.useState)(We),t=Object(o.a)(a,2),l=t[0],c=t[1];Object(n.useEffect)((function(){Ve.propertyDetails(e.match.params.propertyId).then((function(e){var a=e.rating.counter,t=parseFloat((a.reduce((function(e,a){return e+a}),0)/a.length).toFixed(2));c((function(a){return Object(u.a)(Object(u.a)({},a),{},{property:e,actualRating:t})}))}))}),[e]);var s=function(e){c(Object(u.a)(Object(u.a)({},l),{},Object(F.a)({},e.target.name,e.target.value)))},p=function(e){e.preventDefault();var a={bookingDate:l.bookingDate,numberGuests:l.numberGuests};Je.getPropertyAvailability(l.property._id,a).then((function(e){c(Object(u.a)(Object(u.a)({},l),{},{availableResults:e,showFormMobile:!1}))}))},d="far fa-heart fa-stack-1x fa-inverse";l.favourites&&l.favourites.includes(l.property._id)&&(d="fas fa-heart fa-stack-1x fa-inverse");var g=r.a.createElement(r.a.Fragment,null);l.availableResults.length&&(g=r.a.createElement(Be,{guests:l.numberGuests,results:l.availableResults,clearAvailableTimes:function(){c(Object(u.a)(Object(u.a)({},l),{},{availableResults:[]}))}}));var b=l.property.comments.map((function(e,a){return r.a.createElement("div",{className:"comment-kokomo pb-4 pt-4",key:a},r.a.createElement("h5",null,r.a.createElement("img",{src:e.avatar,alt:"Avatar",style:{width:"30px",borderRadius:"100px",marginRight:"10px"}})," ",e.username),r.a.createElement("p",null,e.comment))})),f=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row d-flex align-items-center justify-content-center"},r.a.createElement("div",{className:" flotante-kokomo"},r.a.createElement("div",{className:"row w-100 align-items-center"},r.a.createElement("p",{className:"text-white"},"Necesitas una cuenta para poder hacer reservas."),r.a.createElement(m.b,{to:"/signup",className:"btn kokomo-btn-form",style:{width:"35%"}},"Reg\xedstrate ahora"))),r.a.createElement(m.b,{to:"/signup",className:"btn btn-floating"},"Reg\xedstrate ahora"))),E=r.a.createElement(r.a.Fragment,null);e.getTheUser&&(E=r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye,{handleChangeRating:function(e){c(Object(u.a)(Object(u.a)({},l),{},{ratingComment:e}))},ratingComment:l.ratingComment}),r.a.createElement("form",{onSubmit:function(a){a.preventDefault();var t={username:e.getTheUser.username,comment:l.comment,avatar:e.getTheUser.avatar,rating:l.ratingComment};Ve.addComment(l.property._id,t).then((function(e){var a=e.rating.counter,t=parseFloat((a.reduce((function(e,a){return e+a}),0)/a.length).toFixed(2));c(Object(u.a)(Object(u.a)({},l),{},{property:e,comment:"",actualRating:t}))}))},className:"d-flex mt-2"},r.a.createElement("div",{className:"form-group",style:{width:"70%"}},r.a.createElement("label",{htmlFor:"comment",className:"label active"},"Deja tu comentario"),r.a.createElement("input",{type:"text",name:"comment",value:l.comment,onChange:s})),r.a.createElement("div",{style:{width:"30%"}},r.a.createElement("button",{type:"submit",value:r.a.createElement("i",{className:"fas fa-ellipsis-v"}),className:"btn-kokomo-flex",style:{padding:"19px"}},r.a.createElement("i",{className:"fas fa-paper-plane"}))))," "),f=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row d-flex align-items-center justify-content-center"},r.a.createElement("form",{className:"form-row flotante-kokomo",onSubmit:p},r.a.createElement("div",{className:"row w-100"},r.a.createElement("div",{className:"col-40"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"bookingDate",className:"label active"},"\xbfQu\xe9 d\xeda quieres venir?"),r.a.createElement("input",{type:"date",name:"bookingDate",onChange:s,value:l.bookingDate,"data-date-format":"DD MMMM YYYY"}))),r.a.createElement("div",{className:"col-40"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"numberGuests",className:"label active"},"\xbfCu\xe1ntos ser\xe9is?"),r.a.createElement("input",{type:"number",name:"numberGuests",min:"1",onChange:s,value:l.numberGuests,className:"kokomo-input"}))),r.a.createElement("div",{className:"col-20"},r.a.createElement("button",{type:"submit",className:"kokomo-btn-form"},r.a.createElement(Te.a,null))))),r.a.createElement("button",{onClick:function(){return w()},className:"btn-floating"},"Hacer una reserva"))));var v=r.a.createElement(r.a.Fragment,null);l.actualRating&&(v=r.a.createElement(Ke,{rate:l.actualRating,numberReviews:l.property.rating.counter.length}));var h=ze()(l.property.openingHours[0].openingDays.openingDay,"dd/mm / yyyy "),k=ze()(l.property.openingHours[0].openingDays.closingDay,"dd/mm/yyyy"),N=[];l.property.openingHours[0].weekDays.forEach((function(e){switch(e){case 1:N.push("Lunes");break;case 2:N.push("Martes");break;case 3:N.push("Mi\xe9rcoles");break;case 4:N.push("Jueves");break;case 5:N.push("Viernes");break;case 6:N.push("S\xe1bado");break;case 7:N.push("Domingo");break;default:console.log("El n\xfamero no pertenece a un d\xeda de la semana")}}));var y=N.map((function(e,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,r.a.createElement("p",null,e)),r.a.createElement("td",null,r.a.createElement("p",null,l.property.openingHours[0].openingTimes[0].openingTime,":00 -"," ",l.property.openingHours[0].openingTimes[0].closingTime,":00")))})),j=r.a.createElement(r.a.Fragment,null),w=function(){c(Object(u.a)(Object(u.a)({},l),{},{showFormMobile:!0}))};return l.showFormMobile&&(j=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"text-center d-flex align-items-center justify-content-center kokomo-popup"},r.a.createElement("div",{className:"row align-middle justify-content-center w-100"},r.a.createElement("div",{className:"col-md-4 align-self-center fondo-kokomo"},r.a.createElement("img",{src:"/images/calendar.png",className:"emoji-img",alt:"Horas disponibles"}),r.a.createElement("button",{onClick:function(){c(Object(u.a)(Object(u.a)({},l),{},{showFormMobile:!1}))},className:"close-btn"},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement("form",{onSubmit:p},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"bookingDate",className:"label active"},"\xbfQu\xe9 d\xeda quieres venir?"),r.a.createElement("input",{type:"date",name:"bookingDate",onChange:s,value:l.bookingDate,"data-date-format":"DD MMMM YYYY"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"numberGuests",className:"label active"},"\xbfCu\xe1ntos ser\xe9is?"),r.a.createElement("input",{type:"number",name:"numberGuests",min:"1",onChange:s,value:l.numberGuests,className:"kokomo-input"})),r.a.createElement("button",{type:"submit",className:"kokomo-btn-form"},r.a.createElement(Te.a,null)))))))),r.a.createElement(r.a.Fragment,null,j,r.a.createElement("div",{style:{backgroundColor:"#fbf7f3",height:"100vh"}},r.a.createElement(m.b,{to:"/"},r.a.createElement("div",null,r.a.createElement("span",{className:"fa-stack fa-2x kokomo-back-button"},r.a.createElement("i",{className:"fas fa-circle fa-stack-2x circle-back"}),r.a.createElement("i",{className:"fas fa-arrow-left fa-stack-1x fa-inverse arrow-back"})))),r.a.createElement("div",{className:"home-bg image-background",style:{backgroundImage:"url(".concat(l.property.mainImage,")")}},r.a.createElement("div",{className:"container-left"}),r.a.createElement("div",{className:"white-card"},r.a.createElement("div",{className:"title-heart"},r.a.createElement("div",null,r.a.createElement("a",{onClick:function(){Ve.propertyLove(l.property._id).then((function(e){var a=Object(i.a)(l.favourites);a.push(l.property._id),c(Object(u.a)(Object(u.a)({},l),{},{favourites:a}))}))}},r.a.createElement("span",{className:"fa-stack fa-2x mr-4"},r.a.createElement("i",{className:"fas fa-circle fa-stack-2x orange"}),r.a.createElement("i",{className:d})))),r.a.createElement("div",null,r.a.createElement("h2",{className:"title-search"},l.property.name),v)),r.a.createElement(Ae.a,{defaultActiveKey:"nav-description",id:"nav-tab",className:"nav nav-tabs nav-fill tab-details"},r.a.createElement(Le.a,{eventKey:"nav-description",title:"Info",className:"nav-item nav-link"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h3",{className:"subtitle-search mb-4"},l.property.description),r.a.createElement("p",null,"Duraci\xf3n de la reserva: ",l.property.bookingDuration),r.a.createElement("p",null,"Plazas disponibles: ",l.property.availablePlaces),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-map-marker-alt"})," Direcci\xf3n:"," ",l.property.location.name)),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(qe,{lat:l.property.location.lat,lng:l.property.location.long,property:l.property})))),r.a.createElement(Le.a,{eventKey:"nav-comments",title:"Rese\xf1as",className:"nav-item nav-link"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},E),r.a.createElement("div",{className:"col-md-6"},b))),r.a.createElement(Le.a,{eventKey:"nav-openings",title:"Horarios",className:"nav-item nav-link"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"}),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("p",null,"D\xeda de apertura:",r.a.createElement("span",{id:"openingDay1"}," ",h)),r.a.createElement("p",null,"D\xeda de cierre:",r.a.createElement("span",{id:"closingDay1"}," ",k)),r.a.createElement("table",{className:"table"},r.a.createElement("tbody",null,y)))))),f)),g))},Qe=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"home-container",style:{paddingBottom:"80px"}},r.a.createElement("div",{className:"hero"},r.a.createElement("h2",{className:"hero-title"},"Inicio")),r.a.createElement(w,null),r.a.createElement("div",{className:""},r.a.createElement("h2",{className:"title-search-home"},"Nuestros chiringuitos"),r.a.createElement(k,{filter:"All"}),r.a.createElement("h2",{className:"title-search-home mt-4"},"Estilo chillout"),r.a.createElement(k,{filter:"Chillout"}),r.a.createElement("h2",{className:"title-search-home mt-4"},"Los mejores restaurantes"),r.a.createElement(k,{filter:"Restaurante"}))))},Ze=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"body-container"},r.a.createElement("h3",{className:"section-title mt-4 text-center"},"Tus favoritos"),r.a.createElement(k,{filter:"Favourites"})))},Xe=t(72),ea=t(32),aa=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"div-booking"},r.a.createElement("div",{className:"column-xs"},r.a.createElement("p",{className:"mb-4"},r.a.createElement("span",{className:"booking-ref"},e.booking.bookingRef))),r.a.createElement("div",{className:"column-xl"},r.a.createElement("p",null,r.a.createElement("span",{className:"fa-stack fa-lg"},r.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),r.a.createElement("i",{className:"far fa-calendar-check fa-stack-1x orange"})),e.booking.day),r.a.createElement("p",null,r.a.createElement("span",{className:"fa-stack fa-lg"},r.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),r.a.createElement("i",{className:"far fa-clock fa-stack-1x orange"})),e.booking.time)),r.a.createElement("div",{className:"column-xl"},r.a.createElement("p",null,r.a.createElement(m.b,{to:"/property/"+e.booking.property._id},r.a.createElement("span",{className:"fa-stack fa-lg"},r.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),r.a.createElement("i",{className:"fas fa-map-marker-alt fa-stack-1x orange"})),e.booking.property.name)),r.a.createElement("p",null,r.a.createElement("span",{className:"fa-stack fa-lg"},r.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),r.a.createElement("i",{className:"fas fa-users fa-stack-1x orange"})),e.booking.guests,"persona(s)")),r.a.createElement("div",{className:"column-xs"},r.a.createElement(Xe.a,{id:"dropdown-kokomo-button",title:r.a.createElement("i",{className:"fas fa-ellipsis-v"}),className:"float-right"},r.a.createElement(ea.a.Item,{variant:"success",className:"dropdown-item"},r.a.createElement(m.b,{to:"/booking/details/"+e.booking._id},r.a.createElement("i",{className:"mdi mdi-eye"})," Ver detalles")),r.a.createElement(ea.a.Item,{variant:"success",className:"dropdown-item",href:"whatsapp://send?text=\xa1Te espera una reserva de Kokomo! \ud83d\ude0e Aqu\xed tienes los detalles: http://kokomo-react.herokuapp.com/#/booking/details/"+e.booking._id},r.a.createElement("i",{className:"mdi mdi-share-variant"})," Compartir reserva"),r.a.createElement(ea.a.Divider,null),r.a.createElement("form",{onSubmit:function(a){e.delete(e.booking._id)},className:"dropdown-item danger"},r.a.createElement("button",{className:"link-danger"},r.a.createElement("i",{className:"far fa-trash-alt"})," Cancelar reserva"))))))},ta=new L,na=function(e){var a={topic:"Cancelaci\xf3n reserva "+e.booking.bookingRef,message:"",hideForm:!1},t=Object(n.useState)(a),l=Object(o.a)(t,2),c=l[0],s=l[1],m=r.a.createElement(r.a.Fragment,null),i=function(e){s(Object(u.a)(Object(u.a)({},c),{},Object(F.a)({},e.target.name,e.target.value)))};return c.hideForm||(m=r.a.createElement("div",{className:"text-center d-flex align-items-center justify-content-center kokomo-popup"},r.a.createElement("div",{className:"row align-middle justify-content-center w-100"},r.a.createElement("div",{className:"col-md-4 align-self-center fondo-kokomo"},r.a.createElement("img",{src:"/images/warn.png",className:"emoji-img",alt:"Horas disponibles"}),r.a.createElement("button",{onClick:function(){s(Object(u.a)(Object(u.a)({},c),{},{hideForm:!0}))},className:"close-btn"},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement("p",{className:"mb-4"},"Avisa a tu cliente de que tienes que cancelar su reserva."),r.a.createElement("form",{onSubmit:function(a){a.preventDefault();var t={fromUser:e.user,topic:c.topic,message:c.message,avatar:e.user.avatar};ta.sendMessage(e.customer,t).then((function(a){s(Object(u.a)(Object(u.a)({},c),{},{topic:"",message:""})),e.delete&&e.delete(e.booking.bookingId)}))}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"topic",className:"label active"},"Tema"),r.a.createElement("input",{type:"text",name:"topic",value:c.topic,onChange:i})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"message",className:"label active"},"Tu mensaje"),r.a.createElement("input",{type:"text",name:"message",value:c.message,onChange:i})),r.a.createElement("div",null," ",r.a.createElement("input",{type:"submit",value:"Enviar",className:"btn-kokomo btn-kokomo-success w-100",style:{padding:"19px"}})," ")))))),r.a.createElement(r.a.Fragment,null,m)},ra={messages:[],alert:!1,message:!1},la=r.a.createElement(r.a.Fragment,null),ca=function(e){var a=Object(n.useState)(ra),t=Object(o.a)(a,2),l=t[0],c=t[1],s=function(a){a.preventDefault(),console.log("enviar mensaje");var t=a.target.customer.value,n={bookingId:a.target.bookingId.value,bookingRef:a.target.bookingRef.value};la=r.a.createElement(na,{booking:n,customer:t,user:e.user,delete:e.delete}),c(Object(u.a)(Object(u.a)({},l),{},{message:!0}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.b,{to:"/property/"+e.property._id},r.a.createElement("h2",{className:"title-search"},e.property.name),r.a.createElement("p",{className:"mdi mdi-map-marker-radius mb-4"}," ",e.property.location.name)),e.property.bookings.map((function(e,a){return r.a.createElement("div",{key:a},r.a.createElement("div",{className:"div-booking"},r.a.createElement("div",{className:"column-xs"},r.a.createElement("p",{className:"mb-4"},r.a.createElement("span",{className:"booking-ref"},e.bookingRef))),r.a.createElement("div",{className:"column-xl"},r.a.createElement("p",null,r.a.createElement("span",{className:"fa-stack fa-lg"},r.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),r.a.createElement("i",{className:"far fa-calendar-check fa-stack-1x orange"})),e.day),r.a.createElement("p",null,r.a.createElement("span",{className:"fa-stack fa-lg"},r.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),r.a.createElement("i",{className:"far fa-clock fa-stack-1x orange"})),e.time),r.a.createElement("p",null,r.a.createElement("span",{className:"fa-stack fa-lg"},r.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),r.a.createElement("i",{className:"fas fa-users fa-stack-1x orange"})),e.guests,"persona(s)")),r.a.createElement("div",{className:"column-xl"},r.a.createElement("p",null,r.a.createElement("span",{className:"fa-stack fa-lg"},r.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),r.a.createElement("i",{className:"fas fa-map-marker-alt fa-stack-1x orange"})),e.customer.username),r.a.createElement("p",null,r.a.createElement("span",{className:"fa-stack fa-lg"},r.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),r.a.createElement("i",{className:"fas fa-at fa-stack-1x orange"})),e.customer.email),r.a.createElement("p",null,r.a.createElement("span",{className:"fa-stack fa-lg"},r.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),r.a.createElement("i",{className:"fas fa-phone fa-stack-1x orange"})),e.customer.telNumber)),r.a.createElement("div",{className:"column-xs"},r.a.createElement(Xe.a,{id:"dropdown-kokomo-button",title:r.a.createElement("i",{className:"fas fa-ellipsis-v"}),className:"float-right"},r.a.createElement(ea.a.Item,{variant:"success",className:"dropdown-item",href:"whatsapp://send?text=\xa1Te espera una reserva de Kokomo! \ud83d\ude0e Aqu\xed tienes los detalles: http://kokomo-react.herokuapp.com/#/booking/details/"+e._id},r.a.createElement("i",{className:"mdi mdi-share-variant"})," Compartir reserva"),r.a.createElement(ea.a.Divider,null),r.a.createElement("form",{onSubmit:s},r.a.createElement("input",{type:"hidden",name:"booking",value:e}),r.a.createElement("input",{type:"hidden",name:"bookingId",value:e._id}),r.a.createElement("input",{type:"hidden",name:"bookingRef",value:e.bookingRef}),r.a.createElement("input",{type:"hidden",name:"customer",value:e.customer._id}),r.a.createElement("button",{className:"link-danger"},r.a.createElement("i",{className:"far fa-trash-alt"})," Cancelar reserva"))))))})),r.a.createElement("div",null,la))},oa=new T,sa=new Fe,ma=r.a.createElement("p",null,"Todav\xeda no tienes reservas"),ia=r.a.createElement("p",null,"Todav\xeda no tienes reservas"),ua="client",pa=r.a.createElement(r.a.Fragment,null),da={bookings:[],properties:[],user:{}},ga=function(e){var a=Object(n.useState)(da),t=Object(o.a)(a,2),l=t[0],c=t[1];Object(n.useEffect)((function(){var e=f.a.CancelToken.source();oa.loggedin().then((function(e){e.owner&&(ua="owner"),c((function(a){return Object(u.a)(Object(u.a)({},a),{},{user:e})}))}));return function(){try{sa.myBookings().then((function(e){c((function(a){return Object(u.a)(Object(u.a)({},a),{},{bookings:e.bookings})}))}))}catch(e){if(!f.a.isCancel(e))throw e;console.log("cancelled")}}(),function(){e.cancel()}}),[]),Object(n.useEffect)((function(){sa.propertiesBookings().then((function(e){c((function(a){return Object(u.a)(Object(u.a)({},a),{},{properties:e.ownProperties})}))}))}),[]);var s=function(e){sa.deleteBooking(e).then((function(e){window.location.reload(!1)}))};return l.bookings.length&&(ma=l.bookings.map((function(e,a){return r.a.createElement(aa,{key:a,booking:e,delete:s})}))),e.loggedInUser.owner&&l.properties.length&&(ia=l.properties.map((function(a,t){return r.a.createElement(ca,{key:t,property:a,user:e.loggedInUser,delete:s})})),pa=r.a.createElement(Le.a,{eventKey:"owner",title:"Reservas en tus Locales",className:"nav-item nav-link"},r.a.createElement("div",null,r.a.createElement("div",{className:"tab-pane fade show active",id:"nav-next-bookings",role:"tabpanel","aria-labelledby":"nav-next-bookings-tab"},r.a.createElement("div",{className:"group-booking"},ia))))),r.a.createElement("div",{className:"body-container"},r.a.createElement("h3",{className:"section-title mt-4 mdi mdi-calendar"}," ","Gesti\xf3n de reservas"),r.a.createElement(Ae.a,{defaultActiveKey:ua,id:"nav-tab",className:"nav nav-tabs"},pa,r.a.createElement(Le.a,{eventKey:"client",title:"Tus reservas",className:"nav-item nav-link"},r.a.createElement("div",null,r.a.createElement("div",{className:"tab-pane fade show active",id:"nav-next-bookings",role:"tabpanel","aria-labelledby":"nav-next-bookings-tab"},r.a.createElement("div",{className:"group-booking"},ma))))))},ba=new E,fa={properties:[]},Ea=function(e){var a=Object(n.useState)(fa),t=Object(o.a)(a,2),l=(t[0],t[1]);return Object(n.useEffect)((function(){var a=f.a.CancelToken.source();return function(){try{ba.categoryProperties(e.match.params.name).then((function(e){l((function(a){return Object(u.a)(Object(u.a)({},a),{},{properties:e[0]})}))}))}catch(a){if(!f.a.isCancel(a))throw a;console.log("cancelled")}}(),function(){a.cancel()}}),[e.match.params.name]),r.a.createElement("div",null,r.a.createElement("div",{className:"body-container"},r.a.createElement("h3",{className:"section-title mt-4 text-center"},e.match.params.name),r.a.createElement(k,{filter:e.match.params.name})))},va=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container text-center d-flex align-items-center justify-content-center",style:{height:"100vh"}},r.a.createElement("div",null,r.a.createElement("img",{src:"/images/warning.png",alt:"Error",style:{"max-width":"200px"}}),r.a.createElement("h1",{className:"heading-font orange mt-4"},"P\xe1gina no encontrada"),r.a.createElement("p",null,"\xa1Lo sentimos! Parece que no encontramos lo que buscas"),r.a.createElement(m.b,{to:"/",className:"btn-kokomo btn-kokomo-grey mt-4"},"Volver a inicio"))))},ha=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{class:"container text-center d-flex align-items-center justify-content-center",style:{height:"100vh"}},r.a.createElement("div",null,r.a.createElement("img",{src:"/images/warning.png",alt:"Error",style:{"max-width":"200px"}}),r.a.createElement("h1",{class:"heading-font orange mt-4"},"Error del servidor"),r.a.createElement("p",null,"\xa1Lo sentimos! Parece que hay un error interno."),r.a.createElement(m.b,{to:"/",class:"btn-kokomo btn-kokomo-grey mt-4"},"Volver a inicio"))))},ka=t(107),Na=new E,ya=new we;var ja=function(e){var a=Object(s.g)(),t=Object(n.useState)({property:{name:"",description:"",categories:[],mainImage:null,location:{name:"",lat:0,long:0}}}),l=Object(o.a)(t,2),c=l[0],i=l[1];Object(n.useEffect)((function(){Na.propertyDetails(e.match.params.propertyId).then((function(e){i((function(a){return Object(u.a)(Object(u.a)({},a),{},{property:e})}))}))}),[e.match.params.propertyId]);var p=function(e){i(Object(u.a)(Object(u.a)({},c),{},{property:Object(u.a)(Object(u.a)({},c.property),{},Object(F.a)({},e.target.name,e.target.value))}))},d=[r.a.createElement("p",null,"Datos principales"),r.a.createElement("p",null,"El local")],g=[r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 col-md-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name",className:"label active"},"Nombre"),r.a.createElement("input",{type:"text",name:"name",value:c.property.name,onChange:p})),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{style:{width:"20%"}},r.a.createElement(ka.a,{src:c.property.mainImage,rounded:!0,fluid:!0})),r.a.createElement("div",{className:"form-group",style:{width:"75%"}},r.a.createElement("label",{htmlFor:"imageUrl",className:"label active"},"Imagen"),r.a.createElement("input",{type:"file",name:"imageUrl",onChange:function(e){e.preventDefault();var a=new FormData;a.append("mainImage",e.target.files[0]),Na.uploadPicture(a).then((function(e){i(Object(u.a)(Object(u.a)({},c),{},{property:Object(u.a)(Object(u.a)({},c.property),{},{mainImage:e.path})}))}))}})))),r.a.createElement("div",{className:"col-sm-12 col-md-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"description",className:"label active"},"Descripci\xf3n"),r.a.createElement("input",{type:"textarea",name:"description",value:c.property.description,onChange:p})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"categories",className:"label active"},"Categor\xeda"),r.a.createElement("input",{list:"categories",name:"categories",onChange:p}),r.a.createElement("datalist",{id:"categories"},r.a.createElement("option",{value:"Chillout"}),r.a.createElement("option",{value:"Surfer"}),r.a.createElement("option",{value:"Restaurante"}),r.a.createElement("option",{value:"Discoteca"}),r.a.createElement("option",{value:"Bar"})))))),r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 col-md-6"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),ya.searchLocation(c.search).then((function(e){i(Object(u.a)(Object(u.a)({},c),{},{search:e.candidates[0].name,property:Object(u.a)(Object(u.a)({},c.property),{},{location:{lat:e.candidates[0].geometry.location.lat,long:e.candidates[0].geometry.location.lng,name:e.candidates[0].formatted_address}})}))}))},className:"d-flex"},r.a.createElement("div",{className:"form-group",style:{width:"80%"}},r.a.createElement("label",{htmlFor:"search",className:"label active"},"Direcci\xf3n"),r.a.createElement("input",{type:"text",name:"search",value:c.search,onChange:function(e){i(Object(u.a)(Object(u.a)({},c),{},Object(F.a)({},e.target.name,e.target.value)))}})),r.a.createElement("div",{style:{width:"20%"}},r.a.createElement("input",{type:"submit",value:"Buscar",className:"btn-kokomo-flex",style:{padding:"19px"}})))),r.a.createElement("div",{className:"col-sm-12 col-md-6"},r.a.createElement("p",null,"Candidato: ",c.search),r.a.createElement("p",null,"Direcci\xf3n:"," "+c.property.location.name),r.a.createElement("p",null,"Latitud:"," "+c.property.location.lat),r.a.createElement("p",null,"Longitud:"," "+c.property.location.long))))];return r.a.createElement("div",{className:"container mt-4"},r.a.createElement(m.b,{to:"/"},r.a.createElement("div",null,r.a.createElement("span",{className:"fa-stack fa-2x kokomo-back-button"},r.a.createElement("i",{className:"fas fa-circle fa-stack-2x circle-back"}),r.a.createElement("i",{className:"fas fa-arrow-left fa-stack-1x fa-inverse arrow-back"})))),r.a.createElement("div",{className:"hero"},r.a.createElement("h2",{className:"hero-title text-center"},c.property.name)),r.a.createElement(je,{allSteps:g,stepsTitles:d,handleSubmit:function(e){e.preventDefault();var t={_id:c.property._id,name:c.property.name,description:c.property.description,categories:c.property.categories,location:{name:c.property.location.name,lat:c.property.location.lat,long:c.property.location.long},mainImage:c.property.mainImage};Na.editProperty(c.property._id,t).then((function(e){a.push("/property/".concat(c.property._id))})).catch((function(e){return console.log(e)}))}}))},wa=new Fe,Oa={booking:{bookingRef:"",day:"",time:"",guests:0,customer:{username:""}}},xa=function(e){var a=Object(n.useState)(Oa),t=Object(o.a)(a,2),l=t[0],c=t[1];return Object(n.useEffect)((function(){wa.bookingDetails(e.match.params.bookingId).then((function(e){c((function(a){return Object(u.a)(Object(u.a)({},a),{},{booking:e})}))}))}),[e.match.params.bookingId]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container text-center d-flex align-items-center justify-content-center",style:{height:"90vh"}},r.a.createElement("div",null,r.a.createElement("img",{src:"/images/3.png",className:"emoji-img",alt:"Reserva creada"}),r.a.createElement("h2",{className:"subtitle-landing text-center mb-3"},"\xa1Reserva creada con \xe9xito!"),r.a.createElement("p",null,r.a.createElement("i",{className:"far fa-calendar-alt"})," D\xeda: ",l.booking.day),r.a.createElement("p",null,r.a.createElement("i",{className:"far fa-clock"})," Hora: ",l.booking.time),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-users"})," N\xfamero de personas:"," ",l.booking.guests),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-users"})," A nombre de:"," ",l.booking.customer.username),r.a.createElement("a",{href:"whatsapp://send?text=\xa1Te espera una reserva de Kokomo! \ud83d\ude0e Aqu\xed tienes los detalles: http://kokomo-react.herokuapp.com/#/booking/details/"+l.booking._id,className:"btn-kokomo btn-kokomo-grey mt-4 p-3 mr-4"},"Compartir reserva por WhatsApp"),r.a.createElement(m.b,{to:"/",className:"btn-kokomo btn-kokomo-grey mt-4 p-3"},"Volver a inicio"))))},Ca={loggedInUser:null};var Da=function(){var e=Object(n.useState)(Ca),a=Object(o.a)(e,2),t=a[0],l=a[1],c=function(e){l((function(a){return{loggedInUser:e}}))},m=function(){l(Ca)},i=new T;return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.saveData||null)||{};function a(){return e.obj}null===t.loggedInUser&&(void 0!==a()?c(a()):i.loggedin().then((function(t){var n;n=t,e.obj=n,localStorage.saveData=JSON.stringify(e),c(a())})))}),[i,t.loggedInUser]),r.a.createElement(s.d,null,r.a.createElement(ne,{user:t.loggedInUser,exact:!0,callback:c,path:"/property/create-property",component:De}),r.a.createElement(ne,{user:t.loggedInUser,callback:c,path:"/property/edit/:propertyId",component:ja}),r.a.createElement(s.b,{path:"/property/:propertyId",render:function(e){return r.a.createElement($e,Object.assign({},e,{getTheUser:t.loggedInUser}))}}),r.a.createElement(s.b,{path:"/booking/details/:bookingId",render:function(e){return r.a.createElement(xa,e)}}),r.a.createElement(s.b,{component:function(){return r.a.createElement("div",null,r.a.createElement(D,{getTheUser:t.loggedInUser,key:t.loggedInUser}),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/"},null===t.loggedInUser?r.a.createElement(O,null):r.a.createElement(Qe,null)),r.a.createElement(s.b,{path:"/category/:name",render:function(e){return r.a.createElement(Ea,Object.assign({},e,{getTheUser:t.loggedInUser}))}}),r.a.createElement(s.b,{path:"/login",render:function(e){return r.a.createElement(U,Object.assign({},e,{callback:c}))}}),r.a.createElement(s.b,{path:"/signup",render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(P,Object.assign({},e,{callback:c})))}}),r.a.createElement(s.b,{path:"/signup-local",render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(_,Object.assign({},e,{callback:c})))}}),r.a.createElement(ne,{key:t.loggedInUser,user:t.loggedInUser,callback:c,path:"/profile",component:X}),r.a.createElement(ne,{key:t.loggedInUser,user:t.loggedInUser,callback:c,path:"/my-favourites",component:Ze}),r.a.createElement(ne,{key:t.loggedInUser,user:t.loggedInUser,callback:c,path:"/my-bookings",component:ga}),r.a.createElement(ne,{user:t.loggedInUser,exact:!0,callback:c,path:"/property/create-property",component:De}),r.a.createElement(ne,{user:t.loggedInUser,path:"/search",component:_e}),r.a.createElement(s.b,{exact:!0,path:"/logout",render:function(e){return r.a.createElement(H,Object.assign({},e,{reset:m,callback:c}))}})))}}),r.a.createElement(s.b,{path:"*",component:va,status:404}),r.a.createElement(s.b,{path:"*",component:ha,status:500}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(m.a,null,r.a.createElement(Da,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[115,1,2]]]);
//# sourceMappingURL=main.452056b5.chunk.js.map