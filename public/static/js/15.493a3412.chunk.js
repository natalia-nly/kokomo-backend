(this.webpackJsonpkokomo=this.webpackJsonpkokomo||[]).push([[15],{102:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return n}))},103:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(102);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},105:function(e,t,a){"use strict";var n=a(26),r=a(25),o=a.n(r);t.a=function e(){var t=this;Object(n.a)(this,e),this.createProperty=function(e){return t.service.post("/create-property",e).then((function(e){return e.data}))},this.uploadPicture=function(e){return t.service.post("/upload",e).then((function(e){return e.data}))},this.editProperty=function(e,a){return t.service.post("/edit/"+e,a).then((function(e){return e.data}))},this.allProperties=function(){return t.service.get("/").then((function(e){return e.data}))},this.categoryProperties=function(e){return t.service.get("/category/"+e).then((function(e){return e.data}))},this.propertyDetails=function(e){return t.service.get("/details/"+e).then((function(e){return e.data}))},this.propertyLove=function(e){return t.service.get("/love/"+e).then((function(e){return e.data}))},this.addComment=function(e,a){return t.service.post("/add-comment/"+e,a).then((function(e){return e.data}))},this.deleteProperty=function(e){return t.service.get("/delete/"+e).then((function(e){return e.data}))};var a=o.a.create({baseURL:"https://kokomo-react.herokuapp.com/api/property",withCredentials:!0});this.service=a}},116:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return l}));var n=a(15),r=a(11);function o(){var e=Object(n.a)(["\n  font-size: 24px;\n  font-family: ",";\n  color: ",";\n  font-weight: 700;\n  text-align: ",";\n  padding-left: 20px;\n"]);return o=function(){return e},e}function c(){var e=Object(n.a)(["\n  color: ",";\n  font-family: ",";\n  padding: 10px 0;\n  border-bottom: 1px solid rgba(50, 148, 187, 0.1);\n  margin-bottom: 20px !important;\n  text-align: ",";\n  font-size: 26px;\n\n  i {\n    font-size: 26px;\n  }\n"]);return c=function(){return e},e}var s=r.c.h1(c(),(function(e){return e.theme.colors.text}),(function(e){return e.theme.fonts.text}),(function(e){return e.center?"center":"left"})),l=r.c.h2(o(),(function(e){return e.theme.fonts.text}),(function(e){return e.theme.colors.darkText}),(function(e){return e.center?"center":"left"}))},132:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(4),r=a(10),o=a(101),c=a.n(o),s=/-(.)/g;var l=a(0),i=a.n(l),m=a(104),u=function(e){return e[0].toUpperCase()+(t=e,t.replace(s,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function d(e,t){var a=void 0===t?{}:t,o=a.displayName,s=void 0===o?u(e):o,l=a.Component,d=a.defaultProps,p=i.a.forwardRef((function(t,a){var o=t.className,s=t.bsPrefix,u=t.as,d=void 0===u?l||"div":u,p=Object(r.a)(t,["className","bsPrefix","as"]),f=Object(m.a)(s,e);return i.a.createElement(d,Object(n.a)({ref:a,className:c()(o,f)},p))}));return p.defaultProps=d,p.displayName=s,p}},137:function(e,t,a){"use strict";var n=a(26),r=a(25),o=a.n(r);t.a=function e(){var t=this;Object(n.a)(this,e),this.sendMessage=function(e,a){return t.service.post("/send-message/"+e,a)},this.deleteMessage=function(e){return t.service.post("/delete/"+e).then((function(e){return e.data}))},this.editPhone=function(e){return t.service.post("/editTelephone",e).then((function(e){return e.data}))},this.addOwner=function(e){return t.service.post("/add-owner").then((function(e){return e.data}))};var a=o.a.create({baseURL:"https://kokomo-react.herokuapp.com/api/profile",withCredentials:!0});this.service=a}},148:function(e,t,a){"use strict";var n,r=a(4),o=a(10),c=a(101),s=a.n(c),l=a(143),i=a(0),m=a.n(i),u=a(158),d=a(145),p=((n={})[u.b]="show",n[u.a]="show",n),f=m.a.forwardRef((function(e,t){var a=e.className,n=e.children,c=Object(o.a)(e,["className","children"]),f=Object(i.useCallback)((function(e){Object(d.a)(e),c.onEnter&&c.onEnter(e)}),[c]);return m.a.createElement(u.e,Object(r.a)({ref:t,addEndListener:l.a},c,{onEnter:f}),(function(e,t){return m.a.cloneElement(n,Object(r.a)({},t,{className:s()("fade",a,n.props.className,p[e])}))}))}));f.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},f.displayName="Fade",t.a=f},239:function(e,t,a){"use strict";a.r(t);var n=a(103),r=a(27),o=a(0),c=a.n(o),s=a(14),l=a(28),i=a(25),m=a.n(i),u=a(4),d=a(10),p=a(101),f=a.n(p),b=a(104),g=c.a.forwardRef((function(e,t){var a=e.bsPrefix,n=e.variant,r=e.pill,o=e.className,s=e.as,l=void 0===s?"span":s,i=Object(d.a)(e,["bsPrefix","variant","pill","className","as"]),m=Object(b.a)(a,"badge");return c.a.createElement(l,Object(u.a)({ref:t},i,{className:f()(o,m,r&&m+"-pill",n&&m+"-"+n)}))}));g.displayName="Badge",g.defaultProps={pill:!1};var E=g,v=a(137),h=new v.a,k=new l.a,N={messages:[]},O=function(){var e=Object(o.useState)(N),t=Object(r.a)(e,2),a=t[0],s=t[1];Object(o.useEffect)((function(){var e=m.a.CancelToken.source();return function(){try{k.loggedin().then((function(e){e.messages&&s((function(t){return Object(n.a)(Object(n.a)({},t),{},{user:e,messages:e.messages,message:!1})}))}))}catch(e){if(!m.a.isCancel(e))throw e;console.log("cancelled")}}(),function(){e.cancel()}}),[]);var l=function(e){h.deleteMessage(e.target.messageId.value).then((function(e){console.log(e)}))},i=c.a.createElement("div",{className:"text-center"},c.a.createElement("img",{src:"/images/bell-muted.png",className:"black-white",alt:"Sin notificaciones"}),c.a.createElement("p",null,"No tienes notificaciones pendientes"));return a.messages.length&&(i=a.messages.map((function(e,t){return c.a.createElement("div",{className:"border-top pb-3 pt-3",key:t},c.a.createElement("form",{onSubmit:l,className:"float-right"},c.a.createElement("input",{type:"hidden",value:e._id,name:"messageId"}),c.a.createElement("button",{className:"close-btn-2"},c.a.createElement("i",{className:"fas fa-times"}))),c.a.createElement(E,{variant:"info"},e.topic),c.a.createElement("p",null,e.message))}))),c.a.createElement("div",null,i)},y=a(117),j=a(118),w=a(148),x=a(8),C=a.n(x),P={label:C.a.string.isRequired,onClick:C.a.func},F=c.a.forwardRef((function(e,t){var a=e.label,n=e.onClick,r=e.className,o=Object(d.a)(e,["label","onClick","className"]);return c.a.createElement("button",Object(u.a)({ref:t,type:"button",className:f()("close",r),onClick:n},o),c.a.createElement("span",{"aria-hidden":"true"},"\xd7"),c.a.createElement("span",{className:"sr-only"},a))}));F.displayName="CloseButton",F.propTypes=P,F.defaultProps={label:"Close"};var T,R=F,S=a(132),L=a(131),D=(T="h4",c.a.forwardRef((function(e,t){return c.a.createElement("div",Object(u.a)({},e,{ref:t,className:f()(e.className,T)}))})));D.displayName="DivStyledAsH4";var U=Object(S.a)("alert-heading",{Component:D}),M=Object(S.a)("alert-link",{Component:L.a}),B={show:!0,transition:w.a,closeLabel:"Close alert"},H=c.a.forwardRef((function(e,t){var a=Object(y.a)(e,{show:"onClose"}),n=a.bsPrefix,r=a.show,o=a.closeLabel,s=a.className,l=a.children,i=a.variant,m=a.onClose,p=a.dismissible,g=a.transition,E=Object(d.a)(a,["bsPrefix","show","closeLabel","className","children","variant","onClose","dismissible","transition"]),v=Object(b.a)(n,"alert"),h=Object(j.a)((function(e){m&&m(!1,e)})),k=!0===g?w.a:g,N=c.a.createElement("div",Object(u.a)({role:"alert"},k?E:void 0,{ref:t,className:f()(s,v,i&&v+"-"+i,p&&v+"-dismissible")}),p&&c.a.createElement(R,{onClick:h,label:o}),l);return k?c.a.createElement(k,Object(u.a)({unmountOnExit:!0},E,{ref:void 0,in:r}),N):r?N:null}));H.displayName="Alert",H.defaultProps=B,H.Link=M,H.Heading=U;var I=H,_=new(a(105).a),z=c.a.createElement(c.a.Fragment,null),A=c.a.createElement(c.a.Fragment,null),q={alert:!1},J=function(e){var t=Object(o.useState)(q),a=Object(r.a)(t,2),l=a[0],i=a[1],m=function(){e.property.bookings.length?i(Object(n.a)(Object(n.a)({},l),{},{alert:!0})):_.deleteProperty(e.property._id).then((function(e){window.location.reload(!1)}))};return l.alert&&(A=c.a.createElement("tr",null,c.a.createElement("td",{colspan:"3"},c.a.createElement(I,{variant:"warning"},"Por favor, cancele todos las reservas de este local primero."," ",c.a.createElement(s.b,{to:"/my-bookings"},"Ver reservas"))))),e.property&&(z=c.a.createElement(c.a.Fragment,null,c.a.createElement("tr",null,c.a.createElement("td",null,c.a.createElement("img",{src:e.property.mainImage,className:"mini-kokomo",alt:e.property.name})),c.a.createElement("td",null,c.a.createElement(s.b,{to:"/my-bookings"},c.a.createElement("h2",{className:"title-profile"},e.property.name),c.a.createElement("p",{className:"mdi mdi-calendar"}," ",e.property.bookings?e.property.bookings.length:"0"," reservas"))),c.a.createElement("td",{className:"text-right"},c.a.createElement(s.b,{type:"submit",className:"btn-kokomo-circle btn-kokomo-grey mr-2",to:"/property/edit/"+e.property._id},c.a.createElement("i",{className:"mdi mdi-square-edit-outline"})),c.a.createElement("button",{type:"submit",className:"btn-kokomo-circle btn-kokomo-danger",onClick:function(){return m()}},c.a.createElement("i",{className:"far fa-trash-alt"})))),A)),c.a.createElement(c.a.Fragment,null,z)},G=a(116),V=new l.a,K=new v.a,Q={showConfig:!1,user:{avatar:"",bookings:[],favourites:[],owner:!1,ownProperties:[],_id:"",username:"",email:"",messages:[],telNumber:""}};t.default=function(e){var t=Object(o.useState)(Q),a=Object(r.a)(t,2),l=a[0],i=a[1];Object(o.useEffect)((function(){V.infoUser().then((function(e){i((function(t){return Object(n.a)(Object(n.a)({},t),{},{user:e})}))}))}),[e.loggedInUser._id]);var m=c.a.createElement(c.a.Fragment,null),u=0;l.user&&l.user.ownProperties&&(m=l.user.ownProperties.map((function(e,t){return c.a.createElement(J,{key:t,property:e})})),l.user.ownProperties.map((function(e){return e.bookings&&(u+=e.bookings.length),u})));var d=c.a.createElement(c.a.Fragment,null);return l.showConfig&&(d=c.a.createElement("div",{className:"text-center d-flex align-items-center justify-content-center kokomo-popup"},c.a.createElement("div",{className:"row align-middle justify-content-center w-100"},c.a.createElement("div",{className:"col-md-4 align-self-center fondo-kokomo"},c.a.createElement("img",{src:"/images/config.png",className:"emoji-img",alt:"Horas disponibles"}),c.a.createElement("button",{onClick:function(){i(Object(n.a)(Object(n.a)({},l),{},{showConfig:!1}))},className:"close-btn"},c.a.createElement("i",{className:"fas fa-times"})),c.a.createElement("p",{className:"mb-3"},"No puedes modificar tu nombre de usuario ni tu correo"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={telNumber:l.user.telNumber};K.editPhone(t).then((function(e){i(Object(n.a)(Object(n.a)({},l),{},{showConfig:!1}))}))}},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"telNumber",className:"label active"},"Tel\xe9fono"),c.a.createElement("input",{type:"text",name:"telNumber",value:l.user.telNumber,onChange:function(e){i(Object(n.a)(Object(n.a)({},l),{},{user:Object(n.a)(Object(n.a)({},l.user),{},{telNumber:e.target.value})}))}})),c.a.createElement("div",null,c.a.createElement("input",{type:"submit",value:"Guardar cambios",className:"btn-kokomo btn-kokomo-success w-100",style:{padding:"19px"}}))))))),c.a.createElement("div",{style:{backgroundColor:"#f8fafb",minHeight:"100vh"}},c.a.createElement("div",{className:"body-container",style:{marginTop:"0",paddingTop:"10px",paddingBottom:"50px",marginBottom:"0px"}},c.a.createElement(G.b,null,c.a.createElement("i",{className:"mdi mdi-account-circle"})," Mi perfil"),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-6"},c.a.createElement("div",{className:"card-kokomo"},c.a.createElement("div",{className:"beach-background"},c.a.createElement("div",{className:"text-right"},c.a.createElement("button",{onClick:function(){i(Object(n.a)(Object(n.a)({},l),{},{showConfig:!0}))},className:"btn-kokomo-circle btn-kokomo-white"},c.a.createElement("i",{className:"mdi mdi-account-edit"})))),c.a.createElement("div",{className:"text-center",style:{borderRadius:"26px 26px 0 0",marginTop:"-30px",backgroundColor:"white",paddingBottom:"30px"}},c.a.createElement("img",{src:l.user.avatar,alt:"Avatar",className:"avatar"}),c.a.createElement(G.a,{center:!0},e.loggedInUser.username),c.a.createElement("p",null,l.user.email),c.a.createElement("p",null,l.user.telNumber?"".concat(l.user.telNumber):" "),l.user.owner?"":c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"border-top mt-4 pt-4"},c.a.createElement("button",{onClick:function(e){K.addOwner().then((function(e){i(Object(n.a)(Object(n.a)({},l),{},{user:Object(n.a)(Object(n.a)({},l.user),{},{owner:!0})}))}))},className:"logout-kokomo"},"Tengo un local"))),c.a.createElement("div",{className:"border-top mt-4 pt-4"},c.a.createElement(s.b,{to:"/logout",className:"logout-kokomo"},c.a.createElement("i",{className:"mdi mdi-logout-variant"})," Cerrar sesi\xf3n")))),l.user.owner?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"card-kokomo",style:{padding:"20px",marginTop:"30px"}},c.a.createElement(s.b,{to:"/property/create-property",className:"btn-kokomo-circle btn-kokomo-success float-right"},c.a.createElement("i",{className:"mdi mdi-plus"})),c.a.createElement(G.a,null,"Mis locales"),c.a.createElement("table",{className:"table mt-4"},c.a.createElement("tbody",null,m)))):c.a.createElement("div",{className:"card-kokomo",style:{padding:"20px",marginTop:"30px"}},c.a.createElement(s.b,{to:"/search",className:"btn-kokomo-circle btn-kokomo-success float-right"},c.a.createElement("i",{className:"mdi mdi-plus"})),c.a.createElement(G.a,null,"Mi \xfaltima reserva"),l.user.bookings.length?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement(E,{variant:"info"},l.user.bookings[l.user.bookings.length-1].bookingRef),c.a.createElement("p",null,c.a.createElement("i",{className:"far fa-calendar-alt"})," D\xeda:"," ",l.user.bookings[l.user.bookings.length-1].day),c.a.createElement("p",null,c.a.createElement("i",{className:"far fa-clock"})," Hora:"," ",l.user.bookings[l.user.bookings.length-1].time),c.a.createElement("p",null,c.a.createElement("i",{className:"fas fa-users"})," N\xfamero de personas:"," ",l.user.bookings[l.user.bookings.length-1].guests))):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"text-center"},c.a.createElement("img",{src:"/images/calendar.png",className:"black-white",alt:"Sin reservas"}),c.a.createElement("p",null,"Todav\xeda no tienes reservas"))))),c.a.createElement("div",{className:"col-md-6"},c.a.createElement("div",{className:"card-kokomo",style:{padding:"20px",backgroundColor:"#207190"}},c.a.createElement("h3",{className:"datos-kokomo"},l.user.owner?c.a.createElement(c.a.Fragment,null,c.a.createElement("span",null,u),"Reservas"):c.a.createElement(c.a.Fragment,null,c.a.createElement("span",null,l.user.bookings.length),"Reservas"))),c.a.createElement("div",{className:"card-kokomo",style:{padding:"20px",marginTop:"30px",backgroundColor:"#3394ba"}},c.a.createElement("h3",{className:"datos-kokomo"},l.user.owner?c.a.createElement(c.a.Fragment,null,c.a.createElement("span",null,l.user.ownProperties.length),"Locales"):c.a.createElement(c.a.Fragment,null,c.a.createElement("span",null,l.user.favourites.length),"Favoritos"))),c.a.createElement("div",{className:"card-kokomo",style:{padding:"20px",marginTop:"30px"}},c.a.createElement(G.a,null,"Notificaciones"),c.a.createElement(O,null))))),d)}}}]);
//# sourceMappingURL=15.493a3412.chunk.js.map