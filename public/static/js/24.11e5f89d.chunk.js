(this.webpackJsonpkokomo=this.webpackJsonpkokomo||[]).push([[24],{116:function(e,a,t){"use strict";t.d(a,"b",(function(){return l})),t.d(a,"a",(function(){return o}));var n=t(15),r=t(11);function s(){var e=Object(n.a)(["\n  font-size: 24px;\n  font-family: ",";\n  color: ",";\n  font-weight: 700;\n  text-align: ",";\n  padding-left: 20px;\n"]);return s=function(){return e},e}function c(){var e=Object(n.a)(["\n  color: ",";\n  font-family: ",";\n  padding: 10px 0;\n  border-bottom: 1px solid rgba(50, 148, 187, 0.1);\n  margin-bottom: 20px !important;\n  text-align: ",";\n  font-size: 26px;\n\n  i {\n    font-size: 26px;\n  }\n"]);return c=function(){return e},e}var l=r.c.h1(c(),(function(e){return e.theme.colors.text}),(function(e){return e.theme.fonts.text}),(function(e){return e.center?"center":"left"})),o=r.c.h2(s(),(function(e){return e.theme.fonts.text}),(function(e){return e.theme.colors.darkText}),(function(e){return e.center?"center":"left"}))},123:function(e,a,t){"use strict";var n=t(26),r=t(25),s=t.n(r);a.a=function e(){var a=this;Object(n.a)(this,e),this.createBooking=function(e,t){return a.service.post("/create-booking/"+e,t).then((function(e){return e.data}))},this.myBookings=function(){return a.service.get("/my-bookings").then((function(e){return e.data}))},this.propertiesBookings=function(){return a.service.get("/my-properties-bookings").then((function(e){return e.data}))},this.bookingDetails=function(e){return a.service.get("/details/"+e).then((function(e){return e.data}))},this.deleteBooking=function(e){return a.service.post("/delete/"+e).then((function(e){return e.data}))};var t=s.a.create({baseURL:"https://kokomo-react.herokuapp.com/api/booking",withCredentials:!0});this.service=t}},137:function(e,a,t){"use strict";var n=t(26),r=t(25),s=t.n(r);a.a=function e(){var a=this;Object(n.a)(this,e),this.sendMessage=function(e,t){return a.service.post("/send-message/"+e,t)},this.deleteMessage=function(e){return a.service.post("/delete/"+e).then((function(e){return e.data}))},this.editPhone=function(e){return a.service.post("/editTelephone",e).then((function(e){return e.data}))},this.addOwner=function(e){return a.service.post("/add-owner").then((function(e){return e.data}))};var t=s.a.create({baseURL:"https://kokomo-react.herokuapp.com/api/profile",withCredentials:!0});this.service=t}},242:function(e,a,t){"use strict";t.r(a);var n=t(103),r=t(27),s=t(0),c=t.n(s),l=t(25),o=t.n(l),i=t(177),m=t(155),u=t(14),f=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"div-booking"},c.a.createElement("div",{className:"column-xs"},c.a.createElement("p",{className:"mb-4"},c.a.createElement("span",{className:"booking-ref"},e.booking.bookingRef))),c.a.createElement("div",{className:"column-xl"},c.a.createElement("p",null,c.a.createElement("span",{className:"fa-stack fa-lg"},c.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),c.a.createElement("i",{className:"far fa-calendar-check fa-stack-1x orange"})),e.booking.day),c.a.createElement("p",null,c.a.createElement("span",{className:"fa-stack fa-lg"},c.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),c.a.createElement("i",{className:"far fa-clock fa-stack-1x orange"})),e.booking.time)),c.a.createElement("div",{className:"column-xl"},c.a.createElement("p",null,c.a.createElement(u.b,{to:"/property/"+e.booking.property._id},c.a.createElement("span",{className:"fa-stack fa-lg"},c.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),c.a.createElement("i",{className:"fas fa-map-marker-alt fa-stack-1x orange"})),e.booking.property.name)),c.a.createElement("p",null,c.a.createElement("span",{className:"fa-stack fa-lg"},c.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),c.a.createElement("i",{className:"fas fa-users fa-stack-1x orange"})),e.booking.guests,"persona(s)")),c.a.createElement("div",{className:"column-xs"},c.a.createElement(i.a,{id:"dropdown-kokomo-button",title:c.a.createElement("i",{className:"fas fa-ellipsis-v"}),className:"float-right"},c.a.createElement(m.a.Item,{variant:"success",className:"dropdown-item"},c.a.createElement(u.b,{to:"/booking/details/"+e.booking._id},c.a.createElement("i",{className:"mdi mdi-eye"})," Ver detalles")),c.a.createElement(m.a.Item,{variant:"success",className:"dropdown-item",href:"whatsapp://send?text=\xa1Te espera una reserva de Kokomo! \ud83d\ude0e Aqu\xed tienes los detalles: http://kokomo-react.herokuapp.com/booking/details/"+e.booking._id},c.a.createElement("i",{className:"mdi mdi-share-variant"})," Compartir reserva"),c.a.createElement(m.a.Divider,null),c.a.createElement("form",{onSubmit:function(a){e.delete(e.booking._id)},className:"dropdown-item danger"},c.a.createElement("button",{className:"link-danger"},c.a.createElement("i",{className:"far fa-trash-alt"})," Cancelar reserva"))))))},d=t(102),p=new(t(137).a),g=function(e){var a={topic:"Cancelaci\xf3n reserva "+e.booking.bookingRef,message:"",hideForm:!1},t=Object(s.useState)(a),l=Object(r.a)(t,2),o=l[0],i=l[1],m=c.a.createElement(c.a.Fragment,null),u=function(e){i(Object(n.a)(Object(n.a)({},o),{},Object(d.a)({},e.target.name,e.target.value)))};return o.hideForm||(m=c.a.createElement("div",{className:"text-center d-flex align-items-center justify-content-center kokomo-popup"},c.a.createElement("div",{className:"row align-middle justify-content-center w-100"},c.a.createElement("div",{className:"col-md-4 align-self-center fondo-kokomo"},c.a.createElement("img",{src:"/images/warn.png",className:"emoji-img",alt:"Horas disponibles"}),c.a.createElement("button",{onClick:function(){i(Object(n.a)(Object(n.a)({},o),{},{hideForm:!0}))},className:"close-btn"},c.a.createElement("i",{className:"fas fa-times"})),c.a.createElement("p",{className:"mb-4"},"Avisa a tu cliente de que tienes que cancelar su reserva."),c.a.createElement("form",{onSubmit:function(a){a.preventDefault();var t={fromUser:e.user,topic:o.topic,message:o.message,avatar:e.user.avatar};p.sendMessage(e.customer,t).then((function(a){i(Object(n.a)(Object(n.a)({},o),{},{topic:"",message:""})),e.delete&&e.delete(e.booking.bookingId)}))}},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"topic",className:"label active"},"Tema"),c.a.createElement("input",{type:"text",name:"topic",value:o.topic,onChange:u})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"message",className:"label active"},"Tu mensaje"),c.a.createElement("input",{type:"text",name:"message",value:o.message,onChange:u})),c.a.createElement("div",null," ",c.a.createElement("input",{type:"submit",value:"Enviar",className:"btn-kokomo btn-kokomo-success w-100",style:{padding:"19px"}})," ")))))),c.a.createElement(c.a.Fragment,null,m)},k={messages:[],alert:!1,message:!1},E=c.a.createElement(c.a.Fragment,null),b=function(e){var a=Object(s.useState)(k),t=Object(r.a)(a,2),l=t[0],o=t[1],f=function(a){a.preventDefault(),console.log("enviar mensaje");var t=a.target.customer.value,r={bookingId:a.target.bookingId.value,bookingRef:a.target.bookingRef.value};E=c.a.createElement(g,{booking:r,customer:t,user:e.user,delete:e.delete}),o(Object(n.a)(Object(n.a)({},l),{},{message:!0}))};return c.a.createElement(c.a.Fragment,null,c.a.createElement(u.b,{to:"/property/"+e.property._id},c.a.createElement("h2",{className:"title-search"},e.property.name),c.a.createElement("p",{className:"mdi mdi-map-marker-radius mb-4"}," ",e.property.location.name)),e.property.bookings.map((function(e,a){return c.a.createElement("div",{key:a},c.a.createElement("div",{className:"div-booking"},c.a.createElement("div",{className:"column-xs"},c.a.createElement("p",{className:"mb-4"},c.a.createElement("span",{className:"booking-ref"},e.bookingRef))),c.a.createElement("div",{className:"column-xl"},c.a.createElement("p",null,c.a.createElement("span",{className:"fa-stack fa-lg"},c.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),c.a.createElement("i",{className:"far fa-calendar-check fa-stack-1x orange"})),e.day),c.a.createElement("p",null,c.a.createElement("span",{className:"fa-stack fa-lg"},c.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),c.a.createElement("i",{className:"far fa-clock fa-stack-1x orange"})),e.time),c.a.createElement("p",null,c.a.createElement("span",{className:"fa-stack fa-lg"},c.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),c.a.createElement("i",{className:"fas fa-users fa-stack-1x orange"})),e.guests,"persona(s)")),c.a.createElement("div",{className:"column-xl"},c.a.createElement("p",null,c.a.createElement("span",{className:"fa-stack fa-lg"},c.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),c.a.createElement("i",{className:"fas fa-map-marker-alt fa-stack-1x orange"})),e.customer.username),c.a.createElement("p",null,c.a.createElement("span",{className:"fa-stack fa-lg"},c.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),c.a.createElement("i",{className:"fas fa-at fa-stack-1x orange"})),e.customer.email),c.a.createElement("p",null,c.a.createElement("span",{className:"fa-stack fa-lg"},c.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),c.a.createElement("i",{className:"fas fa-phone fa-stack-1x orange"})),e.customer.telNumber)),c.a.createElement("div",{className:"column-xs"},c.a.createElement(i.a,{id:"dropdown-kokomo-button",title:c.a.createElement("i",{className:"fas fa-ellipsis-v"}),className:"float-right"},c.a.createElement(m.a.Item,{variant:"success",className:"dropdown-item",href:"whatsapp://send?text=\xa1Te espera una reserva de Kokomo! \ud83d\ude0e Aqu\xed tienes los detalles: http://kokomo-react.herokuapp.com/booking/details/"+e._id},c.a.createElement("i",{className:"mdi mdi-share-variant"})," Compartir reserva"),c.a.createElement(m.a.Divider,null),c.a.createElement("form",{onSubmit:f},c.a.createElement("input",{type:"hidden",name:"booking",value:e}),c.a.createElement("input",{type:"hidden",name:"bookingId",value:e._id}),c.a.createElement("input",{type:"hidden",name:"bookingRef",value:e.bookingRef}),c.a.createElement("input",{type:"hidden",name:"customer",value:e.customer._id}),c.a.createElement("button",{className:"link-danger"},c.a.createElement("i",{className:"far fa-trash-alt"})," Cancelar reserva"))))))})),c.a.createElement("div",null,E))},v=t(186),N=t(176),h=t(123),x=t(28),y=t(116),j=new x.a,w=new h.a,O=c.a.createElement("p",null,"Todav\xeda no tienes reservas"),q=c.a.createElement("p",null,"Todav\xeda no tienes reservas"),C="client",F=c.a.createElement(c.a.Fragment,null),R={bookings:[],properties:[],user:{}};a.default=function(e){var a=Object(s.useState)(R),t=Object(r.a)(a,2),l=t[0],i=t[1];Object(s.useEffect)((function(){var e=o.a.CancelToken.source();j.loggedin().then((function(e){e.owner&&(C="owner"),i((function(a){return Object(n.a)(Object(n.a)({},a),{},{user:e})}))}));return function(){try{w.myBookings().then((function(e){i((function(a){return Object(n.a)(Object(n.a)({},a),{},{bookings:e.bookings})}))}))}catch(e){if(!o.a.isCancel(e))throw e;console.log("cancelled")}}(),function(){e.cancel()}}),[]),Object(s.useEffect)((function(){w.propertiesBookings().then((function(e){i((function(a){return Object(n.a)(Object(n.a)({},a),{},{properties:e.ownProperties})}))}))}),[]);var m=function(e){w.deleteBooking(e).then((function(e){window.location.reload(!1)}))};return l.bookings.length&&(O=l.bookings.map((function(e,a){return c.a.createElement(f,{key:a,booking:e,delete:m})}))),e.loggedInUser.owner&&l.properties.length&&(q=l.properties.map((function(a,t){return c.a.createElement(b,{key:t,property:a,user:e.loggedInUser,delete:m})})),F=c.a.createElement(N.a,{eventKey:"owner",title:"Reservas en tus Locales",className:"nav-item nav-link"},c.a.createElement("div",null,c.a.createElement("div",{className:"tab-pane fade show active",id:"nav-next-bookings",role:"tabpanel","aria-labelledby":"nav-next-bookings-tab"},c.a.createElement("div",{className:"group-booking"},q))))),c.a.createElement("div",{className:"body-container"},c.a.createElement(y.b,null,c.a.createElement("i",{className:"mdi mdi-calendar"})," Gesti\xf3n de reservas"),c.a.createElement(v.a,{defaultActiveKey:C,id:"nav-tab",className:"nav nav-tabs"},F,c.a.createElement(N.a,{eventKey:"client",title:"Tus reservas",className:"nav-item nav-link"},c.a.createElement("div",null,c.a.createElement("div",{className:"tab-pane fade show active",id:"nav-next-bookings",role:"tabpanel","aria-labelledby":"nav-next-bookings-tab"},c.a.createElement("div",{className:"group-booking"},O))))))}}}]);
//# sourceMappingURL=24.11e5f89d.chunk.js.map