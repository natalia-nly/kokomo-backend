(this.webpackJsonpkokomo=this.webpackJsonpkokomo||[]).push([[0],{115:function(e,a,t){e.exports=t(151)},120:function(e,a,t){},122:function(e,a,t){},151:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(16),o=t.n(r),c=(t(120),t(9)),s=(t(121),t(122),t(15)),m=t(27),i=t(3),u=t(5),p=t(44),g=t.n(p),d=t(17),E=t(18),b=t.n(E),f=function e(){var a=this;Object(d.a)(this,e),this.createProperty=function(e){return a.service.post("/create-property",e).then((function(e){return e.data}))},this.uploadPicture=function(e){return a.service.post("/upload",e).then((function(e){return e.data}))},this.editProperty=function(e,t){return a.service.post("/edit/"+e,t).then((function(e){return e.data}))},this.allProperties=function(){return a.service.get("/").then((function(e){return e.data}))},this.categoryProperties=function(e){return a.service.get("/category/"+e).then((function(e){return e.data}))},this.propertyDetails=function(e){return a.service.get("/details/"+e).then((function(e){return e.data}))},this.propertyLove=function(e){return a.service.get("/love/"+e).then((function(e){return e.data}))},this.addComment=function(e,t){return a.service.post("/add-comment/"+e,t).then((function(e){return e.data}))},this.deleteProperty=function(e){return a.service.get("/delete/"+e).then((function(e){return e.data}))};var t=b.a.create({baseURL:"https://kokomo-react.herokuapp.com/api/property",withCredentials:!0});this.service=t},v=new f,h={properties:[],favourites:[]},N=function(e){var a,t=Object(n.useState)(h),r=Object(c.a)(t,2),o=r[0],s=r[1];Object(n.useEffect)((function(){"All"===e.filter?v.allProperties().then((function(e){console.log("CONSOLE LOG DESDE AXIOS GET",e),s(Object(i.a)(Object(i.a)({},o),{},{favourites:e[1],properties:e[0]})),a=l.a.createElement("p",null,"\xa1Todav\xeda no hay nada!")})):"Favourites"===e.filter?v.allProperties().then((function(e){console.log("CONSOLE LOG DESDE AXIOS GET",e);var t=e[1],n=e[0],r=[];n.map((function(e){t.includes(e._id)&&r.push(e)})),s(Object(i.a)(Object(i.a)({},o),{},{favourites:t,properties:r})),a=l.a.createElement("p",null,"\xa1Todav\xeda no hay nada!")})):"Categories"===e.filter?v.categoryProperties(e.match.params.name).then((function(t){console.log("CONSOLE LOG DESDE AXIOS GET",t),s(Object(i.a)(Object(i.a)({},o),{},{favourites:t[1],properties:t[0]})),a=l.a.createElement(l.a.Fragment,null,l.a.createElement("img",{src:"/images/"+e.match.params.name+".png",alt:e.match.params.name}))})):v.categoryProperties(e.filter).then((function(t){console.log("CONSOLE LOG DESDE AXIOS GET",t),s(Object(i.a)(Object(i.a)({},o),{},{favourites:t[1],properties:t[0]})),a=l.a.createElement(l.a.Fragment,null,l.a.createElement("img",{src:"/images/"+e.filter+".png",alt:e.filter}))}))}),[]);if(o.properties.length){var p=o.properties.map((function(e,a){var t="far fa-heart fa-stack-1x fa-inverse";o.favourites&&o.favourites.includes(e._id)&&(t="fas fa-heart fa-stack-1x fa-inverse");var n=l.a.createElement(l.a.Fragment,null);if(e.rating){var r=e.rating.counter,c=parseFloat((r.reduce((function(e,a){return e+a}),0)/r.length).toFixed(2)),p={size:12,count:5,color:"#ffba69",activeColor:"#ffba69",a11y:!0,isHalf:!0,emptyIcon:l.a.createElement("i",{className:"far fa-star"}),halfIcon:l.a.createElement("i",{className:"fa fa-star-half-alt",style:{color:"#ffba69"}}),filledIcon:l.a.createElement("i",{className:"fa fa-star"}),edit:!1,value:c};n=l.a.createElement("div",null,l.a.createElement(g.a,p))}return l.a.createElement("div",{className:"property-card",key:a},l.a.createElement("a",{onClick:function(){return a=e._id,console.log("ID desde favs: ",a),void v.propertyLove(a).then((function(e){console.log("Favorito a\xf1adido",e);var t=Object(m.a)(o.favourites);t.push(a),s(Object(i.a)(Object(i.a)({},o),{},{favourites:t}))}));var a}},l.a.createElement("span",{className:"fa-stack fa-2x float-right heart-home"},l.a.createElement("i",{className:"fas fa-circle fa-stack-2x orange-80"}),l.a.createElement("i",{className:t}))),l.a.createElement(u.b,{to:"/property/"+e._id},l.a.createElement("img",{src:e.mainImage,style:{zIndex:1},alt:e.name}),l.a.createElement("img",{src:e.mainImage,className:"blur-image",alt:e.name})),l.a.createElement(u.b,{to:"/property/"+e._id},l.a.createElement("div",{className:"flex-md-row justify-content-between align-items-baseline"},l.a.createElement("h3",null,e.name),n),l.a.createElement("p",{className:"mdi mdi-map-marker-radius"}," ",e.location.name)))}));a=l.a.createElement("div",{className:"properties-group"},p)}return l.a.createElement(l.a.Fragment,null,a)},k=t(61),y=new f,O=function(){var e=new Date;e.setDate(e.getDate());var a={allResults:[],bookingDate:e.toISOString().substr(0,10),numberGuests:0},t=Object(n.useState)(a),r=Object(c.a)(t,2),o=r[0],s=r[1];Object(n.useEffect)((function(){y.allProperties().then((function(e){console.log("CONSOLE LOG DESDE AXIOS GET",e),s(Object(i.a)(Object(i.a)({},o),{},{allResults:e[0]}))}))}),[]);var m=function(e){var a=new Date,t=new Date(e.openingHours[0].openingDays.openingDay),n=new Date(e.openingHours[0].openingDays.closingDay);return'\n    <div>\n    <a href="/#/property/'.concat(e._id,'" class="btn-kokomo btn-kokomo-danger" style="font-size: 16px;">\n    ').concat(e.name,'\n    </a>\n\n    <div style="font-size: 14px;">\n        <span style="color: grey;">Nota:\n        ').concat(function(e){var a=e.counter;if(e.counter.length){return parseFloat((a.reduce((function(e,a){return e+a}),0)/a.length).toFixed(2))}return"Sin evaluaciones"}(e.rating),'\n        </span>\n      </div>\n      <div style="font-size: 14px; color: grey;">Categor\xeda:\n        ').concat(e.categories[0],'\n      </div>\n      <div style="font-size: 14px; color: green;">\n        ').concat(t.getTime()<=a.getTime()&&a.getTime()<=n.getTime()?"Abierto":"Cerrado","\n      </div>\n    </div>")},u=l.a.createElement(l.a.Fragment,null);return o.allResults.length&&(u=l.a.createElement("div",{className:"container mt-4 mapa"},l.a.createElement(k.a,{bootstrapURLKeys:{key:"AIzaSyC2gU3A4p3BVUlocsx-HJtJ8Wjar2aof9Y",language:"sp"},center:{lat:41.35,lng:2.1},defaultZoom:11,options:function(e){return{disableDefaultUI:!1,mapTypeControl:!0,streetViewControl:!0,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"on"}]}]}},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){return function(e,a,t){var n=[],l=[];console.log(t.length),console.log(t),t.forEach((function(t){console.log(t.location),n.push(new a.Marker({position:{lat:t.location.lat,lng:t.location.long},map:e})),l.push(new a.InfoWindow({content:m(t)}))})),n.forEach((function(a,t){a.addListener("click",(function(){l[t].open(e,a)}))}))}(e.map,e.maps,o.allResults)}}))),console.log(o.allResults),l.a.createElement("div",null,u)},j=function(){return l.a.createElement("div",{className:"category-group"},l.a.createElement("div",{className:"one-category"},l.a.createElement(u.b,{to:"/category/Surfer"},l.a.createElement("div",{className:"img-container"},l.a.createElement("img",{src:"/images/Surfer.png",alt:"Surfer"})),l.a.createElement("p",null,"Surfer"))),l.a.createElement("div",{className:"one-category"},l.a.createElement(u.b,{to:"/category/Restaurante"},l.a.createElement("div",{className:"img-container"},l.a.createElement("img",{src:"/images/restaurant.png",alt:"Restaurant"})),l.a.createElement("p",null,"Restaurant"))),l.a.createElement("div",{className:"one-category"},l.a.createElement(u.b,{to:"/category/Chillout"},l.a.createElement("div",{className:"img-container"},l.a.createElement("img",{src:"/images/chillout.png",alt:"Chillout"})),l.a.createElement("p",null,"Chillout"))),l.a.createElement("div",{className:"one-category"},l.a.createElement(u.b,{to:"/category/Bar"},l.a.createElement("div",{className:"img-container"},l.a.createElement("img",{src:"/images/bar.png",alt:"Bar"})),l.a.createElement("p",null,"Bar"))),l.a.createElement("div",{className:"one-category"},l.a.createElement(u.b,{to:"/category/Discoteca"},l.a.createElement("div",{className:"img-container"},l.a.createElement("img",{src:"/images/disco.png",alt:"Disco"})),l.a.createElement("p",null,"Disco"))))},w=function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"hero-landing",style:{padding:"50px 10px"}},l.a.createElement("div",{className:"home-container"},l.a.createElement("h2",{className:"hero-title",style:{color:"white"}},"Este verano",l.a.createElement("br",null),"no te quedes sin planes"),l.a.createElement("h2",{className:"hero-subtitle",style:{color:"#d0dde2"}},"Reserva en los mejores",l.a.createElement("br",null),"locales de tu zona"),l.a.createElement("p",{className:"hero-arrow-phone mdi mdi-arrow-down"}),l.a.createElement("p",{className:"hero-arrow-desktop mdi mdi-arrow-down"}))),l.a.createElement("div",{className:"mapa"},l.a.createElement(O,null)),l.a.createElement("div",{className:"bg-landing"},l.a.createElement("div",{className:"container"},l.a.createElement("h2",{className:"title-landing text-center"},"Reserva en un segundo"),l.a.createElement("div",{className:"row text-center"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",{className:"shadow-blue"},l.a.createElement("img",{src:"/images/1.png",className:"emoji-img",alt:"Busca locales"}),l.a.createElement("h2",{className:"subtitle-landing"},"Encuentra los mejores locales"),l.a.createElement("p",null,"Filtra los locales por d\xeda o por categor\xeda para encontrar el ideal"))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",{className:"shadow-blue"},l.a.createElement("img",{src:"/images/2.png",className:"emoji-img",alt:"Crea reservas"}),l.a.createElement("h2",{className:"subtitle-landing"},"Crea tu reserva"),l.a.createElement("p",null,"Reserva r\xe1pidamente desde Kokomo en tus locales favoritos"))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",{className:"shadow-blue"},l.a.createElement("img",{src:"/images/3.png",className:"emoji-img",alt:"Comparte con los amigos"}),l.a.createElement("h2",{className:"subtitle-landing"},"Comp\xe1rtela con tus amigos"),l.a.createElement("p",null,"Comparte los detalles de la reserva con quien quieras")))))),l.a.createElement(j,null),l.a.createElement("div",{className:"landing-container",style:{paddingBottom:"80px"}},l.a.createElement(N,{filter:"All"})),l.a.createElement("div",{className:"banner-orange"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("h2",null,"\xbfTienes un local?"),l.a.createElement("h3",null,"Registra tus locales y consigue reservas de tus clientes")),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("a",{href:"/signup-local",className:"btn-kokomo btn-kokomo-banner float-right p-2 mt-4"},"Crea tu cuenta")))),l.a.createElement("div",{className:"footer"},l.a.createElement("p",null,"Made in Barcelona |"," ",l.a.createElement("a",{href:"https://github.com/natalia-nly",target:"_blank"},"Natalia")," ","&"," ",l.a.createElement("a",{href:"https://github.com/CSS1982",target:"_blank"},"Claudi"))))},x=t(83),C=t(77),D=function(e){var a=l.a.createElement(x.a,{bg:"light",expand:"lg",className:"navbar navbar-expand-sm navbar-light fixed-top",style:{backgroundColor:"rgb(255, 255, 255)",paddingBottom:0}},l.a.createElement(u.c,{className:"navbar-brand",to:"/"},"KOKOMO"),l.a.createElement(x.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(x.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(C.a,{className:"ml-auto"},l.a.createElement(u.c,{className:"nav-link",to:"/",exact:!0,activeClassName:"navbar-active-logout"},"Inicio"),l.a.createElement(u.c,{className:"nav-link",to:"/signup-local",activeClassName:"navbar-active-logout"},"Tengo un local"),l.a.createElement(u.c,{className:"nav-link",to:"/signup",activeClassName:"navbar-active-logout"},"Registrarme ahora"),l.a.createElement(u.c,{className:"nav-link",to:"/login",activeClassName:"navbar-active-logout"},"Iniciar sesi\xf3n")))),t=l.a.createElement("nav",{className:"navbar-kokomo"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(u.c,{to:"/",className:"mdi mdi-home",exact:!0,activeClassName:"navbar-active-login"},l.a.createElement("span",null,l.a.createElement("i",{className:"fas fa-circle dot-kokomo"})))),l.a.createElement("li",null,l.a.createElement(u.c,{to:"/my-favourites",className:"mdi mdi-heart-outline",activeClassName:"navbar-active-login"},l.a.createElement("span",null,l.a.createElement("i",{className:"fas fa-circle dot-kokomo"})))),l.a.createElement("li",{className:"search-icon-menu"},l.a.createElement(u.c,{to:"/search",className:"mdi mdi-magnify",activeClassName:"navbar-active-login"},l.a.createElement("span",null,l.a.createElement("i",{className:"fas fa-circle dot-kokomo"})))),l.a.createElement("li",null,l.a.createElement(u.c,{to:"/my-bookings",className:"mdi mdi-calendar",activeClassName:"navbar-active-login"},l.a.createElement("span",null,l.a.createElement("i",{className:"fas fa-circle dot-kokomo"})))),l.a.createElement("li",null,l.a.createElement(u.c,{to:"/profile",className:"mdi mdi-account-circle",activeClassName:"navbar-active-login"},l.a.createElement("span",null,l.a.createElement("i",{className:"fas fa-circle dot-kokomo"}))))));return null!==e.getTheUser&&(a=t),l.a.createElement(l.a.Fragment,null," ",a," ")},I=t(12),S=t(35),F=t(37),T=t(36),R=function e(){var a=this;Object(d.a)(this,e),this.signup=function(e,t,n,l){return a.service.post("/signup",{username:e,password:t,telNumber:n,email:l}).then((function(e){return e.data}))},this.signupLocal=function(e,t,n,l){return a.service.post("/signup-local",{username:e,password:t,telNumber:n,email:l}).then((function(e){return e.data}))},this.login=function(e,t){return a.service.post("/login",{username:e,password:t}).then((function(e){return e.data}))},this.upload=function(e){console.log(e);var t=new FormData;return t.append("image",e),a.service.put("/upload",t).then((function(e){return e.data}))},this.edit=function(e,t,n){return a.service.put("/edit",{username:e,campus:t,course:n}).then((function(e){return e.data}))},this.loggedin=function(){return a.service.get("/loggedin").then((function(e){return e.data}))},this.logout=function(){return a.service.post("/logout",{}).then((function(e){return e.data}))};var t=b.a.create({baseURL:"https://kokomo-react.herokuapp.com/api/auth",withCredentials:!0});this.service=t},U=function(e){Object(F.a)(t,e);var a=Object(T.a)(t);function t(e){var n;return Object(d.a)(this,t),(n=a.call(this,e)).handleSubmit=function(e){e.preventDefault();var a={user:n.state.user,password:n.state.password};n.service.login(a.user,a.password).then((function(e){n.setState({user:"",password:""}),n.props.callback(e),n.props.history.push("/")})).catch((function(e){return console.log(e)}))},n.handleChange=function(e){n.setState(Object(I.a)({},e.target.name,e.target.value))},n.state={user:"",password:""},n.service=new R,n}return Object(S.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"row align-middle  justify-content-center p-4",style:{minHeight:"100vh"}},l.a.createElement("div",{className:"col-sm-12 col-md-4 align-self-center"},l.a.createElement("h2",{className:"hero-title text-center mb-4"},"Iniciar sesi\xf3n"),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"user",className:"label active"},"Nombre de usuario"),l.a.createElement("input",{type:"text",name:"user",value:this.state.user,onChange:this.handleChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"password",className:"label active"},"Contrase\xf1a"),l.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange})),l.a.createElement("button",{type:"submit",className:"btn-kokomo btn-kokomo-success btn-block p-3"},"Iniciar sesi\xf3n")),l.a.createElement("a",{href:"https://kokomo-react.herokuapp.com/api/auth/google",className:"btn-kokomo btn-kokomo-google btn-block p-3 mt-4"}," ",l.a.createElement("img",{src:"/images/google.svg",alt:"Google logo",style:{width:"20px",marginRight:"8px"}})," ","Iniciar sesi\xf3n con Google"))))}}]),t}(n.Component),L=function(e){Object(F.a)(t,e);var a=Object(T.a)(t);function t(e){var n;return Object(d.a)(this,t),(n=a.call(this,e)).service=new R,n}return Object(S.a)(t,[{key:"eraseLocalStorage",value:function(){localStorage.clear()}},{key:"render",value:function(){var e=this;return this.eraseLocalStorage(),this.service.logout().then((function(a){e.props.callback(null),e.props.reset()})).catch((function(e){return console.log(e)})),l.a.createElement(s.a,{to:"/"})}}]),t}(n.Component),H=function(e){Object(F.a)(t,e);var a=Object(T.a)(t);function t(e){var n;return Object(d.a)(this,t),(n=a.call(this,e)).handleSubmit=function(e){e.preventDefault();var a={user:n.state.user,password:n.state.password,telNumber:n.state.telNumber,email:n.state.email};n.service.signup(a.user,a.password,a.telNumber,a.email).then((function(e){n.setState({user:"",password:"",telNumber:"",email:""}),n.props.callback(e),n.props.history.push("/profile")})).catch((function(e){return console.log(e)}))},n.handleChange=function(e){n.setState(Object(I.a)({},e.target.name,e.target.value))},n.state={user:"",email:"",telNumber:"",password:""},n.service=new R,n}return Object(S.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"row align-middle  justify-content-center p-4",style:{"min-height":"100vh"}},l.a.createElement("div",{className:"col-sm-12 col-md-4 align-self-center"},l.a.createElement("h2",{className:"hero-title text-center mb-4"},"Crea tu cuenta"),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"user",className:"label active"},"Nombre de usuario"),l.a.createElement("input",{type:"text",name:"user",value:this.state.user,onChange:this.handleChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"telNumber",className:"label active"},"N\xfamero de tel\xe9fono"),l.a.createElement("input",{type:"number",name:"telNumber",value:this.state.telNumber,onChange:this.handleChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"email",className:"label active"},"Email"),l.a.createElement("input",{type:"email",name:"email",value:this.state.email,onChange:this.handleChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"password",className:"label active"},"Contrase\xf1a"),l.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange})),l.a.createElement("button",{type:"submit",class:"btn-kokomo btn-kokomo-success btn-block p-3"},"Registrarme")),l.a.createElement("a",{href:"https://kokomo-react.herokuapp.com/api/auth/google",class:"btn-kokomo btn-kokomo-google btn-block p-3 mt-4"},l.a.createElement("img",{src:"/images/google.svg",alt:"Google logo",style:{width:"20px",marginRight:"8px"}})," ","Registrarme con Google"))))}}]),t}(n.Component),G=function(e){Object(F.a)(t,e);var a=Object(T.a)(t);function t(e){var n;return Object(d.a)(this,t),(n=a.call(this,e)).handleSubmit=function(e){e.preventDefault();var a={user:n.state.user,password:n.state.password,telNumber:n.state.telNumber,email:n.state.email};n.service.signupLocal(a.user,a.password,a.telNumber,a.email).then((function(e){n.setState({user:"",password:"",telNumber:"",email:""}),n.props.callback(e),n.props.history.push("/profile")})).catch((function(e){return console.log(e)}))},n.handleChange=function(e){n.setState(Object(I.a)({},e.target.name,e.target.value))},n.state={user:"",email:"",telNumber:"",password:""},n.service=new R,n}return Object(S.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"row align-middle  justify-content-center p-4",style:{"min-height":"100vh"}},l.a.createElement("div",{className:"col-sm-12 col-md-4 align-self-center"},l.a.createElement("h2",{className:"hero-title text-center mb-4"},"Crea tus locales"),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"user",className:"label active"},"Nombre de usuario"),l.a.createElement("input",{type:"text",name:"user",value:this.state.user,onChange:this.handleChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"telNumber",className:"label active"},"N\xfamero de tel\xe9fono"),l.a.createElement("input",{type:"number",name:"telNumber",value:this.state.telNumber,onChange:this.handleChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"email",className:"label active"},"Email"),l.a.createElement("input",{type:"email",name:"email",value:this.state.email,onChange:this.handleChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"password",className:"label active"},"Contrase\xf1a"),l.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange})),l.a.createElement("button",{type:"submit",className:"btn-kokomo btn-kokomo-success btn-block p-3"},"Registrarme")),l.a.createElement("a",{href:"/auth/google",className:"btn-kokomo btn-kokomo-google btn-block p-3 mt-4"},l.a.createElement("img",{src:"/images/google.svg",alt:"Google logo",style:{width:"20px",marginRight:"8px"}})," ","Registrarme con Google"))))}}]),t}(n.Component),A=t(102),P=function e(){var a=this;Object(d.a)(this,e),this.sendMessage=function(e,t){return a.service.post("/send-message/"+e,t)},this.deleteMessage=function(e){return a.service.post("/delete/"+e).then((function(e){return e.data}))};var t=b.a.create({baseURL:"https://kokomo-react.herokuapp.com/api/profile",withCredentials:!0});this.service=t},_=new P,M=new R,B={messages:[]},q=function(e){var a=Object(n.useState)(B),t=Object(c.a)(a,2),r=t[0],o=t[1];Object(n.useEffect)((function(){M.loggedin().then((function(e){console.log(e.messages),e.messages&&o(Object(i.a)(Object(i.a)({},r),{},{user:e,messages:e.messages,message:!1}))}))}),[]);var s=function(e){console.log(e.target.messageId.value),_.deleteMessage(e.target.messageId.value).then((function(e){console.log(e)}))},m=l.a.createElement("p",null,"No tienes Notificaciones pendientes");return r.messages.length&&(m=r.messages.map((function(e,a){return l.a.createElement("div",{className:"border-top pb-3 pt-3",key:a},l.a.createElement("form",{onSubmit:s,className:"float-right"},l.a.createElement("input",{type:"hidden",value:e._id,name:"messageId"}),l.a.createElement("button",{className:"close-btn-2"},l.a.createElement("i",{className:"fas fa-times"}))),l.a.createElement(A.a,{variant:"info"},e.topic),l.a.createElement("p",null,e.message))}))),l.a.createElement("div",null,m)},z=t(108),K=new f,Y=l.a.createElement(l.a.Fragment,null),V=l.a.createElement(l.a.Fragment,null),J={alert:!1},X=function(e){var a=Object(n.useState)(J),t=Object(c.a)(a,2),r=t[0],o=t[1];Object(n.useEffect)((function(){K.propertyDetails(e.property).then((function(e){console.log(e),o(Object(i.a)(Object(i.a)({},r),{},{property:e}))}))}),[]);var s=function(){r.property.bookings.length?(console.log("Por favor, cancele todos las reservas de este local primero"),o(Object(i.a)(Object(i.a)({},r),{},{alert:!0}))):K.deleteProperty(r.property._id).then((function(e){console.log(e),window.location.reload(!1)}))};return r.alert&&(V=l.a.createElement(z.a,{variant:"warning mt-4"},"Por favor, cancele todos las reservas de este local primero."," ",l.a.createElement(u.b,{to:"/my-bookings"},"Ver reservas"))),console.log(e),r.property&&(Y=l.a.createElement(l.a.Fragment,null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(u.b,{to:"/property/"+e.property},l.a.createElement("h2",{className:"title-search-home"},r.property.name),l.a.createElement("p",{className:"mdi mdi-map-marker-radius mb-4"}," ",r.property.location.name))),l.a.createElement("td",null,l.a.createElement(u.b,{type:"submit",className:"btn-kokomo btn-kokomo-grey mr-3 mb-4",to:"/property/edit/"+e.property},l.a.createElement("i",{className:"fas fa-pen"})),l.a.createElement("button",{type:"submit",className:"btn-kokomo btn-kokomo-danger mr-3 mb-4",onClick:function(){return s()}},l.a.createElement("i",{className:"far fa-trash-alt"})))),V)),l.a.createElement(l.a.Fragment,null,Y)},W=new R,$={},Q=function(e){console.log("estamos en profile!!"),console.log(e.loggedInUser);var a=Object(n.useState)($),t=Object(c.a)(a,2),r=t[0],o=t[1];Object(n.useEffect)((function(){W.loggedin().then((function(e){console.log(e.messages),o(Object(i.a)(Object(i.a)({},r),{},{user:e}))}))}),[]);var s=l.a.createElement(l.a.Fragment,null);return r.user&&r.user.ownProperties&&(console.log("Property desde el mapa de ownproperties: ",r.user.ownProperties),s=r.user.ownProperties.map((function(e,a){return l.a.createElement(X,{key:a,property:e})}))),l.a.createElement("div",null,l.a.createElement("div",{className:"beach-background"},l.a.createElement("div",{className:"text-right"},l.a.createElement(u.b,{to:"/profile/edit",className:"btn-kokomo btn-kokomo-grey mr-3"},"Configuraci\xf3n"),l.a.createElement(u.b,{to:"/logout",className:"btn-kokomo btn-kokomo-danger"},"Cerrar sesi\xf3n"))),l.a.createElement("div",{className:"text-center",style:{borderRadius:"30px",marginTop:"-30px",backgroundColor:"white",paddingBottom:"30px"}},l.a.createElement("img",{src:e.loggedInUser.avatar,alt:"Avatar",className:"avatar"}),l.a.createElement("h2",null,"Hola ",e.loggedInUser.username,"!"),l.a.createElement("p",null,"email: ",e.loggedInUser.email),l.a.createElement("p",null,e.loggedInUser.telNumber?"N\xfamero de tel\xe9fono: ".concat(e.loggedInUser.telNumber):" ")),l.a.createElement("div",{className:"body-container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement(u.b,{to:"/search",className:"btn-kokomo btn-kokomo-success float-right"},"Crear una nueva reserva"),l.a.createElement("div",{className:"col"},e.loggedInUser.owner?l.a.createElement(u.b,{to:"/property/create-property",className:"btn-kokomo btn-kokomo-success float-right mr-4"},"Crear un nuevo local"):""))),l.a.createElement("div",{className:"row mt-4"},l.a.createElement("div",{className:"col-md-8"},l.a.createElement("table",{className:"table"},l.a.createElement("tbody",null,s))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement(q,null)))))},Z=t(109),ee=JSON.parse(localStorage.saveData||null)||{};new R;function ae(){return ee.obj}var te=function(e){var a=e.component,t=e.user,n=e.callback,r=Object(Z.a)(e,["component","user","callback"]);return l.a.createElement(s.b,Object.assign({},r,{render:function(e){return t?(console.log("user2",t),l.a.createElement(a,Object.assign({},e,{loggedInUser:t,callback:n}))):void 0!==ae()?l.a.createElement(a,Object.assign({},e,{loggedInUser:ae(),callback:n})):l.a.createElement(s.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},ne=t(175),le=t(13),re=t(10),oe=t(182),ce=t(178),se=t(181),me=(t(103),t(105)),ie=t.n(me),ue=t(104),pe=t.n(ue),ge=t(106),de=t.n(ge),Ee=t(177),be=t(180),fe=t(179);Object(ne.a)({root:{color:"#eaeaf0",display:"flex",height:22,alignItems:"center"},active:{color:"#784af4"},circle:{width:8,height:8,borderRadius:"50%",backgroundColor:"currentColor"},completed:{color:"#784af4",zIndex:1,fontSize:18}});var ve=Object(le.a)({alternativeLabel:{top:22},active:{"& $line":{backgroundImage:"linear-gradient( 95deg,#ffba69 0%,#ffba69 50%,#ffba69 100%)"}},completed:{"& $line":{backgroundImage:"linear-gradient( 95deg,#ffba69 0%,#ffba69 50%,#ffba69 100%)"}},line:{height:3,border:0,backgroundColor:"#eaeaf0",borderRadius:1}})(Ee.a),he=Object(ne.a)({root:{backgroundColor:"#ccc",zIndex:1,color:"#fff",width:50,height:50,display:"flex",borderRadius:"50%",justifyContent:"center",alignItems:"center"},active:{backgroundImage:"linear-gradient( 136deg, #ffba69 0%, #ec9834 50%, #cc7309 100%)",boxShadow:"0 4px 10px 0 rgba(0,0,0,.25)"},completed:{backgroundImage:"linear-gradient( 136deg, #ffba69 0%, #ec9834 50%, #cc7309 100%)"}});function Ne(e){var a,t=he(),n=e.active,r=e.completed,o={1:l.a.createElement(pe.a,null),2:l.a.createElement(ie.a,null),3:l.a.createElement(de.a,null)};return l.a.createElement("div",{className:Object(re.a)(t.root,(a={},Object(I.a)(a,t.active,n),Object(I.a)(a,t.completed,r),a))},o[String(e.icon)])}var ke=Object(ne.a)((function(e){return{root:{width:"100%"},button:{marginRight:e.spacing(1)},buttonActive:{backgroundColor:"#3294bb",color:"#ffffff"},buttonSuccess:{backgroundColor:"#28a745",color:"#ffffff"},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}})),ye=function(e){var a=ke(),t=l.a.useState(0),n=Object(c.a)(t,2),r=n[0],o=n[1],s=e.stepsTitles;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:a.root},l.a.createElement(oe.a,{alternativeLabel:!0,activeStep:r,connector:l.a.createElement(ve,null)},s.map((function(e,a){return l.a.createElement(ce.a,{key:a},l.a.createElement(se.a,{StepIconComponent:Ne},e))}))),l.a.createElement("div",null,r===s.length?l.a.createElement("div",null,l.a.createElement(fe.a,{className:a.instructions,component:"div"},"All steps completed - you're finished"),l.a.createElement(be.a,{onClick:function(){o(0)},className:a.button},"Reset")):l.a.createElement("div",null,l.a.createElement(fe.a,{className:a.instructions,component:"div"},function(a){switch(a){case 0:return e.allSteps[0];case 1:return e.allSteps[1];case 2:return e.allSteps[2];default:return"Unknown step"}}(r)),l.a.createElement("div",{className:"text-center mt-5"},l.a.createElement(be.a,{disabled:0===r,onClick:function(){o((function(e){return e-1}))},className:a.button},"Anterior"),r===s.length-1?l.a.createElement(be.a,{variant:"contained",color:"#3294bb",onClick:e.handleSubmit,className:a.buttonSuccess},"Crear propiedad"):l.a.createElement(be.a,{variant:"contained",onClick:function(){o((function(e){return e+1}))},className:a.buttonActive},"Siguiente"))))))},Oe=function e(){var a=this;Object(d.a)(this,e),this.searchLocation=function(e){return a.service.get("/maps?search="+e).then((function(e){return e.data}))},this.getAvailability=function(e){return a.service.post("/getAvailability",e).then((function(e){return e.data}))},this.getPropertyAvailability=function(e,t){return a.service.post("/getAvailability/"+e,t).then((function(e){return e.data}))};var t=b.a.create({baseURL:"https://kokomo-react.herokuapp.com/api/search",withCredentials:!0});this.service=t},je=new f,we=new Oe,xe={name:"",description:"",categories:[],mainImage:null,location:{name:"",lat:0,long:0},openingHours:[{openingDays:{openingDay:null,closingDay:null},weekDays:[],openingTimes:[{openingTime:0,closingTime:0}]}],bookingDuration:0,availablePlaces:0};var Ce=function(){var e=Object(s.g)(),a=Object(n.useState)(xe),t=Object(c.a)(a,2),r=t[0],o=t[1],p=function(e){o(Object(i.a)(Object(i.a)({},r),{},Object(I.a)({},e.target.name,e.target.value)))},g=function(e){var a=Object(m.a)(r.openingHours);if(a[0].weekDays.includes(parseInt(e.target.value))){var t=a[0].weekDays.indexOf(parseInt(e.target.value));a[0].weekDays.splice(t,1)}else a[0].weekDays.push(parseInt(e.target.value));o(Object(i.a)(Object(i.a)({},r),{},{openingHours:a}))},d=[l.a.createElement("p",null,"Datos principales"),l.a.createElement("p",null,"Horarios"),l.a.createElement("p",null,"El local")],E=[l.a.createElement("div",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-12 col-md-6"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"name",className:"label active"},"Nombre"),l.a.createElement("input",{type:"text",name:"name",value:r.name,onChange:p})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"imageUrl",className:"label active"},"Imagen"),l.a.createElement("input",{type:"file",name:"imageUrl",onChange:function(e){e.preventDefault();var a=new FormData;a.append("mainImage",e.target.files[0]),je.uploadPicture(a).then((function(e){console.log("File upload successful:",e),o(Object(i.a)(Object(i.a)({},r),{},{mainImage:e.path}))}))}}))),l.a.createElement("div",{className:"col-sm-12 col-md-6"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"description",className:"label active"},"Descripci\xf3n"),l.a.createElement("input",{type:"textarea",name:"description",value:r.description,onChange:p})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"categories",className:"label active"},"Categor\xeda"),l.a.createElement("input",{list:"categories",type:"categories",id:"input-categories",name:"categories",onChange:p}),l.a.createElement("datalist",{id:"categories"},l.a.createElement("option",{value:"Chillout"}),l.a.createElement("option",{value:"Surfer"}),l.a.createElement("option",{value:"Restaurante"}),l.a.createElement("option",{value:"Discoteca"}),l.a.createElement("option",{value:"Bar"})))))),l.a.createElement("div",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-12 col-md-6"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"openingDay",className:"label active"},"D\xeda de apertura"),l.a.createElement("input",{type:"date",name:"openingDay",value:r.openingHours[0].openingDays.openingDay,onChange:function(e){var a=Object(m.a)(r.openingHours);a[0].openingDays.openingDay=e.target.value,o(Object(i.a)(Object(i.a)({},r),{},{openingHours:a}))}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"closingDay",className:"label active"},"D\xeda de cierre"),l.a.createElement("input",{type:"date",name:"closingDay",value:r.openingHours[0].openingDays.closingDay,onChange:function(e){var a=Object(m.a)(r.openingHours);a[0].openingDays.closingDay=e.target.value,o(Object(i.a)(Object(i.a)({},r),{},{openingHours:a}))}})),l.a.createElement("h6",null,"D\xedas de la semana"),l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col-6"},l.a.createElement("div",{className:"custom-control custom-checkbox"},l.a.createElement("input",{type:"checkbox",className:"custom-control-input",name:"monday",value:1,onChange:g}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"monday"},"Lunes")),l.a.createElement("div",{className:"custom-control custom-checkbox"},l.a.createElement("input",{type:"checkbox",className:"custom-control-input",name:"tuesday",value:2,onChange:g}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"tuesday"},"Martes")),l.a.createElement("div",{className:"custom-control custom-checkbox"},l.a.createElement("input",{type:"checkbox",className:"custom-control-input",name:"wednesday",value:3,onChange:g}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"wednesday"},"Mi\xe9rcoles")),l.a.createElement("div",{className:"custom-control custom-checkbox"},l.a.createElement("input",{type:"checkbox",className:"custom-control-input",name:"thursday",value:4,onChange:g}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"thursday"},"Jueves"))),l.a.createElement("div",{className:"col-6"},l.a.createElement("div",{className:"custom-control custom-checkbox"},l.a.createElement("input",{type:"checkbox",className:"custom-control-input",name:"friday",value:5,onChange:g}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"friday"},"Viernes")),l.a.createElement("div",{className:"custom-control custom-checkbox"},l.a.createElement("input",{type:"checkbox",className:"custom-control-input",name:"saturday",value:6,onChange:g}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"saturday"},"S\xe1bado")),l.a.createElement("div",{className:"custom-control custom-checkbox"},l.a.createElement("input",{type:"checkbox",className:"custom-control-input",name:"sunday",value:0,onChange:g}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"sunday"},"Domingo")))))),l.a.createElement("div",{className:"col-sm-12 col-md-6"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"openingHours",className:"label active"},"Hora de apertura"),l.a.createElement("input",{type:"number",name:"openingHours",value:r.openingHours[0].openingTimes[0].openingTime,onChange:function(e){var a=Object(m.a)(r.openingHours);a[0].openingTimes[0].openingTime=e.target.value,o(Object(i.a)(Object(i.a)({},r),{},{openingHours:a}))}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"closingHours",className:"label active"},"Hora de cierre"),l.a.createElement("input",{type:"number",name:"closingHours",value:r.openingHours[0].openingTimes[0].closingTime,onChange:function(e){console.log("closingTime:",r.openingHours[0].openingTimes[0].closingTime);var a=Object(m.a)(r.openingHours);a[0].openingTimes[0].closingTime=e.target.value,o(Object(i.a)(Object(i.a)({},r),{},{openingHours:a}))}}))))),l.a.createElement("div",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-12 col-md-6"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"bookingDuration",className:"label active"},"Duraci\xf3n de la reserva (en minutos)"),l.a.createElement("input",{type:"number",name:"bookingDuration",value:r.bookingDuration,onChange:p})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"availablePlaces",className:"label active"},"Plazas"),l.a.createElement("input",{type:"number",name:"availablePlaces",value:r.availablePlaces,onChange:p}))),l.a.createElement("div",{className:"col-sm-12 col-md-6"},l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),we.searchLocation(r.search).then((function(e){console.log(e),console.log(r),o(Object(i.a)(Object(i.a)({},r),{},{search:e.candidates[0].name,location:{lat:e.candidates[0].geometry.location.lat,long:e.candidates[0].geometry.location.lng,name:e.candidates[0].formatted_address}}))}))},className:"d-flex"},l.a.createElement("div",{className:"form-group",style:{width:"80%"}},l.a.createElement("label",{htmlFor:"search",className:"label active"},"Direcci\xf3n"),l.a.createElement("input",{type:"text",name:"search",value:r.search,onChange:p})),l.a.createElement("div",{style:{width:"20%"}},l.a.createElement("input",{type:"submit",value:"Buscar",className:"btn-kokomo-flex",style:{padding:"19px"}}))),l.a.createElement("p",null,"Candidato: ",r.search),l.a.createElement("p",null,"Direcci\xf3n:",r.location.name),l.a.createElement("p",null,"Latitud:",r.location.lat),l.a.createElement("p",null,"Longitud:",r.location.long))))];return l.a.createElement("div",{className:"container mt-4"},l.a.createElement(u.b,{to:"/"},l.a.createElement("div",null,l.a.createElement("span",{className:"fa-stack fa-2x kokomo-back-button"},l.a.createElement("i",{className:"fas fa-circle fa-stack-2x circle-back"}),l.a.createElement("i",{class:"fas fa-arrow-left fa-stack-1x fa-inverse arrow-back"})))),l.a.createElement("div",{className:"hero"},l.a.createElement("h2",{className:"hero-title text-center"},"Crea tu local")),l.a.createElement(ye,{allSteps:E,stepsTitles:d,handleSubmit:function(a){a.preventDefault(),console.log(r);var t={name:r.name,description:r.description,categories:r.categories,location:{name:r.location.name,lat:r.location.lat,long:r.location.long},openingHours:Object(m.a)(r.openingHours),bookingDuration:r.bookingDuration,availablePlaces:r.availablePlaces,mainImage:r.mainImage};je.createProperty(t).then((function(a){console.log("file uploaded",a),e.push("/")})).catch((function(e){return console.log(e)}))}}))},De=function e(){var a=this;Object(d.a)(this,e),this.createBooking=function(e,t){return a.service.post("/create-booking/"+e,t).then((function(e){return e.data}))},this.myBookings=function(){return a.service.get("/my-bookings").then((function(e){return e.data}))},this.propertiesBookings=function(){return a.service.get("/my-properties-bookings").then((function(e){return e.data}))},this.bookingDetails=function(e){return a.service.get("/details/"+e).then((function(e){return e.data}))},this.deleteBooking=function(e){return a.service.post("/delete/"+e).then((function(e){return e.data}))};var t=b.a.create({baseURL:"https://kokomo-react.herokuapp.com/api/booking",withCredentials:!0});this.service=t},Ie=new De,Se=function(e){var a=e.results,t=Object(s.g)(),n="No results";console.log(a);var r=function(e){e.preventDefault(),console.log(e.target);var a={scheduleId:e.target.scheduleId.value};console.log(a.scheduleId);var n={day:e.target.day.value,guests:e.target.guests.value};Ie.createBooking(a.scheduleId,n).then((function(e){console.log(e),t.push("/my-bookings")}))};return a[0].property&&(console.log(a),n=a.map((function(e,a){return l.a.createElement("div",{className:"one-property",key:a},l.a.createElement("a",{href:"/property/"+e.property._id},l.a.createElement("div",{className:"property-card"},l.a.createElement("span",{className:"fa-stack fa-2x float-right heart-home"},l.a.createElement("i",{className:"fas fa-circle fa-stack-2x orange-80"}),l.a.createElement("i",{className:"fas fa-heart fa-stack-1x fa-inverse"})),l.a.createElement("div",null,l.a.createElement("img",{src:e.property.mainImage,style:{zIndex:"1"},alt:e.property.name}),l.a.createElement("img",{src:e.property.mainImage,className:"blur-image",alt:e.property.name})))),l.a.createElement("div",{className:"search-pc"},l.a.createElement("h3",null,e.property.name),l.a.createElement("p",{className:"mdi mdi-map-marker-radius"},e.property.location.name),l.a.createElement("div",{className:"row mt-3 ml-2 mb-4"},e.timeboxes.map((function(a,t){return l.a.createElement("form",{onSubmit:r,key:t},l.a.createElement("input",{type:"hidden",name:"scheduleId",value:a._id}),l.a.createElement("input",{type:"hidden",name:"day",value:a.day}),l.a.createElement("input",{type:"hidden",name:"guests",value:e.guests}),l.a.createElement("input",{type:"submit",className:"kokomo-hours",value:a.startTime}))})))))}))),l.a.createElement("div",{className:"container"},l.a.createElement("h3",{className:"mt-4 mb-4 section-title"},"Resultados de tu b\xfasqueda"),l.a.createElement("div",{className:"properties-group-2"},n))},Fe=t(57),Te=t.n(Fe),Re=new Oe,Ue=new Date;Ue.setDate(Ue.getDate());var Le={bookingDate:Ue.toISOString().substr(0,10),numberGuests:0,availableResults:[]},He=function(e){var a=Object(n.useState)(Le),t=Object(c.a)(a,2),r=t[0],o=t[1],s=function(e){o(Object(i.a)(Object(i.a)({},r),{},Object(I.a)({},e.target.name,e.target.value)))},m=l.a.createElement(l.a.Fragment,null);return r.availableResults.length&&(m=l.a.createElement(Se,{results:r.availableResults})),l.a.createElement("div",{className:"body-container"},l.a.createElement("div",null,l.a.createElement("h3",{className:"section-title mt-4 mdi mdi-magnify"},"Busca el mejor sitio"),l.a.createElement(O,null)),l.a.createElement("div",null,l.a.createElement("div",{className:"row d-flex align-items-center justify-content-center mt-5"},l.a.createElement("form",{className:"form-row flotante-kokomo-search",onSubmit:function(e){e.preventDefault();var a={bookingDate:r.bookingDate,numberGuests:r.numberGuests};Re.getAvailability(a).then((function(e){console.log("response: ",e),o(Object(i.a)(Object(i.a)({},r),{},{availableResults:e}))}))}},l.a.createElement("div",{className:"row w-100"},l.a.createElement("div",{className:"col-40"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"bookingDate",className:"label active"},"\xbfQu\xe9 d\xeda quieres venir?"),l.a.createElement("input",{type:"date",name:"bookingDate",onChange:s,value:r.bookingDate,"data-date-format":"DD MMMM YYYY"}))),l.a.createElement("div",{className:"col-40"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"numberGuests",className:"label active"},"\xbfCu\xe1ntos ser\xe9is?"),l.a.createElement("input",{type:"number",name:"numberGuests",min:"1",onChange:s,value:r.numberGuests,className:"kokomo-input"}))),l.a.createElement("div",{className:"col-20"},l.a.createElement("button",{type:"submit",className:"kokomo-btn-form"},l.a.createElement(Te.a,null)))))),l.a.createElement("div",null,m)))},Ge=t(78),Ae=t(42),Pe=new De,_e=function(e){var a={availableResults:e.results,guests:e.guests,bookingFinished:!1,bookingId:0,day:"",hour:""},t=Object(n.useState)(a),r=Object(c.a)(t,2),o=r[0],s=r[1],m="No results";console.log(o.availableResults);var p=function(e){e.preventDefault(),console.log(e.target);var a={scheduleId:e.target.scheduleId.value};console.log(a.scheduleId);var t={day:e.target.day.value,guests:e.target.guests.value};Pe.createBooking(a.scheduleId,t).then((function(e){console.log(e),s(Object(i.a)(Object(i.a)({},o),{},{bookingFinished:!0,bookingId:e._id,day:e.day,hour:e.time}))}))};o.availableResults&&(m=o.availableResults.map((function(e){return l.a.createElement("div",{className:"col-auto mb-3"},l.a.createElement("form",{onSubmit:p},l.a.createElement("input",{type:"hidden",name:"scheduleId",value:e._id}),l.a.createElement("input",{type:"hidden",name:"day",value:e.day}),l.a.createElement("input",{type:"hidden",name:"guests",value:o.guests}),l.a.createElement("input",{type:"submit",className:"kokomo-hours",value:e.startTime})))})));var g="whatsapp://send?text=\xa1Te espera una reserva de Kokomo! \ud83d\ude0e Aqu\xed tienes los detalles: http://kokomo-react.herokuapp.com/booking/details/".concat(o.bookingId),d=l.a.createElement(l.a.Fragment,null,l.a.createElement("img",{src:"/images/3.png",className:"emoji-img",alt:"Reserva creada con \xe9xito"}),l.a.createElement("h2",{className:"subtitle-landing text-center mb-3"},"\xa1Reserva creada con \xe9xito!"),l.a.createElement("p",null,l.a.createElement("i",{className:"far fa-calendar-alt"})," D\xeda: ",o.day),l.a.createElement("p",null,l.a.createElement("i",{className:"far fa-clock"})," Hora: ",o.hour),l.a.createElement("p",null,l.a.createElement("i",{className:"fas fa-users"})," N\xfamero de personas: ",o.guests),l.a.createElement("a",{href:g,className:"btn-kokomo btn-kokomo-grey mt-4 mr-2 p-3"},"Compartir reserva por WhatsApp"),l.a.createElement(u.b,{to:"/",className:"btn-kokomo btn-kokomo-grey mt-4 ml-2 p-3"},"Volver a inicio")),E=l.a.createElement(l.a.Fragment,null,l.a.createElement("img",{src:"/images/calendar.png",className:"emoji-img",alt:"Horas disponibles"}),l.a.createElement("button",{onClick:e.clearAvailableTimes,className:"close-btn"},l.a.createElement("i",{className:"fas fa-times"})),l.a.createElement("h2",{className:"subtitle-landing text-center mb-3"},"Horas disponibles"),l.a.createElement("div",{className:"row justify-content-center"},m));return o.bookingFinished&&(E=d),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"text-center d-flex align-items-center justify-content-center kokomo-popup"},l.a.createElement("div",{className:"row align-middle justify-content-center w-100"},l.a.createElement("div",{className:"col-md-4 align-self-center fondo-kokomo"},E))))},Me=function(e){var a=new Date;a.setDate(a.getDate());var t;t={lat:e.lat,lng:e.lng};var n=function(e){var a=new Date,t=new Date(e.openingHours[0].openingDays.openingDay),n=new Date(e.openingHours[0].openingDays.closingDay);return'\n    <div>\n    <a href="/#/property/'.concat(e._id,'" class="btn-kokomo btn-kokomo-danger" style="font-size: 16px;">\n    ').concat(e.name,'\n    </a>\n\n    <div style="font-size: 14px;">\n        <span style="color: grey;">Nota:\n        ').concat(function(e){var a=e.counter;if(e.counter.length){return parseFloat((a.reduce((function(e,a){return e+a}),0)/a.length).toFixed(2))}return"Sin evaluaciones"}(e.rating),'\n        </span>\n      <div style="font-size: 14px; color: grey;">Categor\xeda:\n        ').concat(e.categories[0],'\n      </div>\n      <div style="font-size: 14px; color: grey;">\n        ').concat("$".repeat(e.price_level),'\n      </div>\n      <div style="font-size: 14px; color: green;">\n        ').concat(t.getTime()<=a.getTime()&&a.getTime()<=n.getTime()?"Abierto":"Cerrado","\n      </div>\n    </div>")};return console.log(e.property),l.a.createElement("div",{className:"container mapa"},l.a.createElement(k.a,{bootstrapURLKeys:{key:"AIzaSyC2gU3A4p3BVUlocsx-HJtJ8Wjar2aof9Y",language:"sp"},center:t,defaultZoom:11,options:function(e){return{disableDefaultUI:!1,mapTypeControl:!0,streetViewControl:!0,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"on"}]}]}},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(a){return function(e,a,t){var l=[],r=[];console.log(t),l.push(new a.Marker({position:{lat:t.location.lat,lng:t.location.long},map:e})),r.push(new a.InfoWindow({content:n(t)})),l.forEach((function(a,t){a.addListener("click",(function(){r[t].open(e,a)}))}))}(a.map,a.maps,e.property)}}))},Be=t(89),qe=t.n(Be),ze=function(e){var a={size:12,count:5,color:"#174e67",activeColor:"#174e67",a11y:!0,isHalf:!0,emptyIcon:l.a.createElement("i",{className:"far fa-star"}),halfIcon:l.a.createElement("i",{className:"fa fa-star-half-alt",style:{color:"#174e67"}}),filledIcon:l.a.createElement("i",{className:"fa fa-star"}),edit:!1,value:e.rate};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"d-flex"},l.a.createElement(g.a,a),l.a.createElement("p",{className:"text-review"},e.numberReviews," ",1===e.numberReviews?"rese\xf1a":"rese\xf1as")))},Ke=function(e){var a={size:12,count:5,color:"#ffba69",activeColor:"#ffba69",value:e.ratingComment,a11y:!0,isHalf:!0,emptyIcon:l.a.createElement("i",{className:"far fa-star"}),halfIcon:l.a.createElement("i",{className:"fa fa-star-half-alt"}),filledIcon:l.a.createElement("i",{className:"fa fa-star"}),onChange:function(a){e.handleChangeRating(a)}};return l.a.createElement(l.a.Fragment,null,l.a.createElement(g.a,a))},Ye=new f,Ve=new Oe,Je={property:{name:"",location:{name:"",lat:41.393542,lng:2.203153},rating:{counter:[4]},openingHours:[{openingDays:{openingDay:"",closingDay:""},openingTimes:[{openingTime:0,closingTime:0}],weekDays:[]}],bookings:[],comments:[{username:"",comment:""}]},availableResults:[],comment:"",favourites:[],ratingComment:0,showFormMobile:!1},Xe=function(e){var a=Object(n.useState)(Je),t=Object(c.a)(a,2),r=t[0],o=t[1];Object(n.useEffect)((function(){console.log(e),Ye.propertyDetails(e.match.params.propertyId).then((function(e){console.log("CONSOLE LOG DESDE AXIOS GET",e);var a=e.rating.counter,t=parseFloat((a.reduce((function(e,a){return e+a}),0)/a.length).toFixed(2));o(Object(i.a)(Object(i.a)({},r),{},{property:e,actualRating:t}))}))}),[]);var s=function(e){o(Object(i.a)(Object(i.a)({},r),{},Object(I.a)({},e.target.name,e.target.value)))},p=function(e){e.preventDefault();var a={bookingDate:r.bookingDate,numberGuests:r.numberGuests};Ve.getPropertyAvailability(r.property._id,a).then((function(e){console.log(e),o(Object(i.a)(Object(i.a)({},r),{},{availableResults:e,showFormMobile:!1}))}))},g="far fa-heart fa-stack-1x fa-inverse";r.favourites&&r.favourites.includes(r.property._id)&&(g="fas fa-heart fa-stack-1x fa-inverse"),console.log(r.availableResults);var d=l.a.createElement(l.a.Fragment,null);r.availableResults.length&&(d=l.a.createElement(_e,{guests:r.numberGuests,results:r.availableResults,clearAvailableTimes:function(){o(Object(i.a)(Object(i.a)({},r),{},{availableResults:[]}))}}));var E=r.property.comments.map((function(e,a){return l.a.createElement("div",{className:"comment-kokomo pb-4 pt-4",key:a},l.a.createElement("h5",null,l.a.createElement("img",{src:e.avatar,alt:"Avatar",style:{width:"30px",borderRadius:"100px",marginRight:"10px"}})," ",e.username),l.a.createElement("p",null,e.comment))})),b=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row d-flex align-items-center justify-content-center"},l.a.createElement("div",{className:" flotante-kokomo"},l.a.createElement("div",{className:"row w-100 align-items-center"},l.a.createElement("p",{className:"text-white"},"Necesitas una cuenta para poder hacer reservas."),l.a.createElement(u.b,{to:"/signup",className:"btn kokomo-btn-form",style:{width:"35%"}},"Reg\xedstrate ahora"))),l.a.createElement(u.b,{to:"/signup",className:"btn btn-floating"},"Reg\xedstrate ahora"))),f=l.a.createElement(l.a.Fragment,null);e.getTheUser&&(f=l.a.createElement(l.a.Fragment,null,l.a.createElement(Ke,{handleChangeRating:function(e){o(Object(i.a)(Object(i.a)({},r),{},{ratingComment:e}))},ratingComment:r.ratingComment}),l.a.createElement("form",{onSubmit:function(a){a.preventDefault();var t={username:e.getTheUser.username,comment:r.comment,avatar:e.getTheUser.avatar,rating:r.ratingComment};Ye.addComment(r.property._id,t).then((function(e){console.log("Comentario a\xf1adido",e);var a=e.rating.counter,t=parseFloat((a.reduce((function(e,a){return e+a}),0)/a.length).toFixed(2));o(Object(i.a)(Object(i.a)({},r),{},{property:e,comment:"",actualRating:t}))}))},className:"d-flex mt-2"},l.a.createElement("div",{className:"form-group",style:{width:"70%"}},l.a.createElement("label",{htmlFor:"comment",className:"label active"},"Deja tu comentario"),l.a.createElement("input",{type:"text",name:"comment",value:r.comment,onChange:s})),l.a.createElement("div",{style:{width:"30%"}},l.a.createElement("button",{type:"submit",value:l.a.createElement("i",{className:"fas fa-ellipsis-v"}),className:"btn-kokomo-flex",style:{padding:"19px"}},l.a.createElement("i",{className:"fas fa-paper-plane"}))))," "),b=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row d-flex align-items-center justify-content-center"},l.a.createElement("form",{className:"form-row flotante-kokomo",onSubmit:p},l.a.createElement("div",{className:"row w-100"},l.a.createElement("div",{className:"col-40"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"bookingDate",className:"label active"},"\xbfQu\xe9 d\xeda quieres venir?"),l.a.createElement("input",{type:"date",name:"bookingDate",onChange:s,value:r.bookingDate,"data-date-format":"DD MMMM YYYY"}))),l.a.createElement("div",{className:"col-40"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"numberGuests",className:"label active"},"\xbfCu\xe1ntos ser\xe9is?"),l.a.createElement("input",{type:"number",name:"numberGuests",min:"1",onChange:s,value:r.numberGuests,className:"kokomo-input"}))),l.a.createElement("div",{className:"col-20"},l.a.createElement("button",{type:"submit",className:"kokomo-btn-form"},l.a.createElement(Te.a,null))))),l.a.createElement("button",{onClick:function(){return j()},className:"btn-floating"},"Hacer una reserva"))));var v=l.a.createElement(l.a.Fragment,null);r.actualRating&&(v=l.a.createElement(ze,{rate:r.actualRating,numberReviews:r.property.rating.counter.length}));var h=qe()(r.property.openingHours[0].openingDays.openingDay,"dd/mm / yyyy "),N=qe()(r.property.openingHours[0].openingDays.closingDay,"dd/mm/yyyy"),k=[];r.property.openingHours[0].weekDays.forEach((function(e){switch(e){case 1:k.push("Lunes");break;case 2:k.push("Martes");break;case 3:k.push("Mi\xe9rcoles");break;case 4:k.push("Jueves");break;case 5:k.push("Viernes");break;case 6:k.push("S\xe1bado");break;case 7:k.push("Domingo");break;default:console.log("El n\xfamero no pertenece a un d\xeda de la semana")}}));var y=k.map((function(e,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",null,l.a.createElement("p",null,e)),l.a.createElement("td",null,l.a.createElement("p",null,r.property.openingHours[0].openingTimes[0].openingTime,":00 -"," ",r.property.openingHours[0].openingTimes[0].closingTime,":00")))})),O=l.a.createElement(l.a.Fragment,null),j=function(){o(Object(i.a)(Object(i.a)({},r),{},{showFormMobile:!0}))};return r.showFormMobile&&(O=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"text-center d-flex align-items-center justify-content-center kokomo-popup"},l.a.createElement("div",{className:"row align-middle justify-content-center w-100"},l.a.createElement("div",{className:"col-md-4 align-self-center fondo-kokomo"},l.a.createElement("img",{src:"/images/calendar.png",className:"emoji-img",alt:"Horas disponibles"}),l.a.createElement("button",{onClick:function(){o(Object(i.a)(Object(i.a)({},r),{},{showFormMobile:!1}))},className:"close-btn"},l.a.createElement("i",{className:"fas fa-times"})),l.a.createElement("form",{onSubmit:p},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"bookingDate",className:"label active"},"\xbfQu\xe9 d\xeda quieres venir?"),l.a.createElement("input",{type:"date",name:"bookingDate",onChange:s,value:r.bookingDate,"data-date-format":"DD MMMM YYYY"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"numberGuests",className:"label active"},"\xbfCu\xe1ntos ser\xe9is?"),l.a.createElement("input",{type:"number",name:"numberGuests",min:"1",onChange:s,value:r.numberGuests,className:"kokomo-input"})),l.a.createElement("button",{type:"submit",className:"kokomo-btn-form"},l.a.createElement(Te.a,null)))))))),l.a.createElement(l.a.Fragment,null,O,l.a.createElement("div",{style:{backgroundColor:"#fbf7f3",height:"100vh"}},l.a.createElement(u.b,{to:"/"},l.a.createElement("div",null,l.a.createElement("span",{className:"fa-stack fa-2x kokomo-back-button"},l.a.createElement("i",{className:"fas fa-circle fa-stack-2x circle-back"}),l.a.createElement("i",{className:"fas fa-arrow-left fa-stack-1x fa-inverse arrow-back"})))),l.a.createElement("div",{className:"home-bg image-background",style:{backgroundImage:"url(".concat(r.property.mainImage,")")}},l.a.createElement("div",{className:"container-left"}),l.a.createElement("div",{className:"white-card"},l.a.createElement("div",{className:"title-heart"},l.a.createElement("div",null,l.a.createElement("a",{onClick:function(){Ye.propertyLove(r.property._id).then((function(e){console.log("Favorito a\xf1adido",e);var a=Object(m.a)(r.favourites);a.push(r.property._id),o(Object(i.a)(Object(i.a)({},r),{},{favourites:a}))}))}},l.a.createElement("span",{className:"fa-stack fa-2x mr-4"},l.a.createElement("i",{className:"fas fa-circle fa-stack-2x orange"}),l.a.createElement("i",{className:g})))),l.a.createElement("div",null,l.a.createElement("h2",{className:"title-search"},r.property.name),v)),l.a.createElement(Ge.a,{defaultActiveKey:"nav-description",id:"nav-tab",className:"nav nav-tabs nav-fill tab-details"},l.a.createElement(Ae.a,{eventKey:"nav-description",title:"Info",className:"nav-item nav-link"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("h3",{className:"subtitle-search mb-4"},r.property.description),l.a.createElement("p",null,"Duraci\xf3n de la reserva: ",r.property.bookingDuration),l.a.createElement("p",null,"Plazas disponibles: ",r.property.availablePlaces),l.a.createElement("p",null,l.a.createElement("i",{className:"fas fa-map-marker-alt"})," Direcci\xf3n:"," ",r.property.location.name)),l.a.createElement("div",{className:"col-md-6"},l.a.createElement(Me,{lat:r.property.location.lat,lng:r.property.location.long,property:r.property})))),l.a.createElement(Ae.a,{eventKey:"nav-comments",title:"Rese\xf1as",className:"nav-item nav-link"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},f),l.a.createElement("div",{className:"col-md-6"},E))),l.a.createElement(Ae.a,{eventKey:"nav-openings",title:"Horarios",className:"nav-item nav-link"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"}),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("p",null,"D\xeda de apertura:",l.a.createElement("span",{id:"openingDay1"}," ",h)),l.a.createElement("p",null,"D\xeda de cierre:",l.a.createElement("span",{id:"closingDay1"}," ",N)),l.a.createElement("table",{className:"table"},l.a.createElement("tbody",null,y)))))),b)),d))},We=function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"home-container",style:{paddingBottom:"80px"}},l.a.createElement("div",{className:"hero"},l.a.createElement("h2",{className:"hero-title"},"Inicio"),l.a.createElement("br",null)),l.a.createElement(j,null),l.a.createElement("div",{className:""},l.a.createElement("h2",{className:"title-search-home"},"Nuestros chiringuitos"),l.a.createElement(N,{filter:"All"}),l.a.createElement("h2",{className:"title-search-home mt-4"},"Estilo chillout"),l.a.createElement(N,{filter:"Chillout"}),l.a.createElement("h2",{className:"title-search-home mt-4"},"Los mejores restaurantes"),l.a.createElement(N,{filter:"Restaurante"}))))},$e=function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"body-container"},l.a.createElement("h3",{className:"section-title mt-4"},l.a.createElement("i",{className:"fas fa-heart fa-sm"}),"Tus favoritos"),l.a.createElement(N,{filter:"Favourites"})))},Qe=t(71),Ze=t(32),ea=function(e){console.log("estamos en booking"),console.log(e);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"div-booking"},l.a.createElement("div",{className:"column-xs"},l.a.createElement("p",{className:"mb-4"},l.a.createElement("span",{className:"booking-ref"},e.booking.bookingRef))),l.a.createElement("div",{className:"column-xl"},l.a.createElement("p",null,l.a.createElement("span",{className:"fa-stack fa-lg"},l.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),l.a.createElement("i",{className:"far fa-calendar-check fa-stack-1x orange"})),e.booking.day),l.a.createElement("p",null,l.a.createElement("span",{className:"fa-stack fa-lg"},l.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),l.a.createElement("i",{className:"far fa-clock fa-stack-1x orange"})),e.booking.time)),l.a.createElement("div",{className:"column-xl"},l.a.createElement("p",null,l.a.createElement(u.b,{to:"/property/"+e.booking.property._id},l.a.createElement("span",{className:"fa-stack fa-lg"},l.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),l.a.createElement("i",{className:"fas fa-map-marker-alt fa-stack-1x orange"})),e.booking.property.name)),l.a.createElement("p",null,l.a.createElement("span",{className:"fa-stack fa-lg"},l.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),l.a.createElement("i",{className:"fas fa-users fa-stack-1x orange"})),e.booking.guests,"persona(s)")),l.a.createElement("div",{className:"column-xs"},l.a.createElement(Qe.a,{id:"dropdown-kokomo-button",title:l.a.createElement("i",{className:"fas fa-ellipsis-v"}),className:"float-right"},l.a.createElement(Ze.a.Item,{variant:"success",className:"dropdown-item"},l.a.createElement(u.b,{to:"/booking/details/"+e.booking._id},l.a.createElement("i",{className:"mdi mdi-eye"})," Ver detalles")),l.a.createElement(Ze.a.Item,{variant:"success",className:"dropdown-item",href:"whatsapp://send?text=\xa1Te espera una reserva de Kokomo! \ud83d\ude0e Aqu\xed tienes los detalles: http://kokomo-react.herokuapp.com/booking/details/"+e.booking._id},l.a.createElement("i",{className:"mdi mdi-share-variant"})," Compartir reserva"),l.a.createElement(Ze.a.Divider,null),l.a.createElement("form",{onSubmit:function(a){console.log("booking ->delete",e.booking._id),e.delete(e.booking._id)},className:"dropdown-item danger"},l.a.createElement("button",{className:"link-danger"},l.a.createElement("i",{className:"far fa-trash-alt"})," Cancelar reserva"))))))},aa=new P,ta=function(e){console.log(e);var a={topic:"Cancelaci\xf3n reserva "+e.booking.bookingRef,message:"",hideForm:!1},t=Object(n.useState)(a),r=Object(c.a)(t,2),o=r[0],s=r[1],m=l.a.createElement(l.a.Fragment,null),u=function(e){console.log(o),s(Object(i.a)(Object(i.a)({},o),{},Object(I.a)({},e.target.name,e.target.value)))};return o.hideForm||(m=l.a.createElement("div",{className:"text-center d-flex align-items-center justify-content-center kokomo-popup"},l.a.createElement("div",{className:"row align-middle justify-content-center w-100"},l.a.createElement("div",{className:"col-md-4 align-self-center fondo-kokomo"},l.a.createElement("img",{src:"/images/warn.png",className:"emoji-img",alt:"Horas disponibles"}),l.a.createElement("button",{onClick:function(){s(Object(i.a)(Object(i.a)({},o),{},{hideForm:!0}))},className:"close-btn"},l.a.createElement("i",{className:"fas fa-times"})),l.a.createElement("p",{className:"mb-4"},"Avisa a tu cliente de que tienes que cancelar su reserva."),l.a.createElement("form",{onSubmit:function(a){a.preventDefault();var t={fromUser:e.user,topic:o.topic,message:o.message,avatar:e.user.avatar};aa.sendMessage(e.customer,t).then((function(a){console.log("Mensaje enviado",a),s(Object(i.a)(Object(i.a)({},o),{},{topic:"",message:""})),e.delete&&e.delete(e.booking.bookingId)}))}},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"topic",className:"label active"},"Tema"),l.a.createElement("input",{type:"text",name:"topic",value:o.topic,onChange:u})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"message",className:"label active"},"Tu mensaje"),l.a.createElement("input",{type:"text",name:"message",value:o.message,onChange:u})),l.a.createElement("div",null," ",l.a.createElement("input",{type:"submit",value:"Enviar",className:"btn-kokomo btn-kokomo-success w-100",style:{padding:"19px"}})," ")))))),l.a.createElement(l.a.Fragment,null,m)},na={messages:[],alert:!1},la=l.a.createElement(l.a.Fragment,null),ra=function(e){var a=Object(n.useState)(na),t=Object(c.a)(a,2),r=t[0],o=t[1];Object(n.useEffect)((function(){o(Object(i.a)(Object(i.a)({},r),{},{message:!1}))}),[]);var s=function(a){a.preventDefault(),console.log("enviar mensaje");var t=a.target.customer.value,n={bookingId:a.target.bookingId.value,bookingRef:a.target.bookingRef.value};la=l.a.createElement(ta,{booking:n,customer:t,user:e.user,delete:e.delete}),o(Object(i.a)(Object(i.a)({},r),{},{message:!0}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(u.b,{to:"/property/"+e.property._id},l.a.createElement("h2",{className:"title-search"},e.property.name),l.a.createElement("p",{className:"mdi mdi-map-marker-radius mb-4"}," ",e.property.location.name)),e.property.bookings.map((function(e,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{key:a},l.a.createElement("div",{className:"div-booking"},l.a.createElement("div",{className:"column-xs"},l.a.createElement("p",{className:"mb-4"},l.a.createElement("span",{className:"booking-ref"},e.bookingRef))),l.a.createElement("div",{className:"column-xl"},l.a.createElement("p",null,l.a.createElement("span",{className:"fa-stack fa-lg"},l.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),l.a.createElement("i",{className:"far fa-calendar-check fa-stack-1x orange"})),e.day),l.a.createElement("p",null,l.a.createElement("span",{className:"fa-stack fa-lg"},l.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),l.a.createElement("i",{className:"far fa-clock fa-stack-1x orange"})),e.time),l.a.createElement("p",null,l.a.createElement("span",{className:"fa-stack fa-lg"},l.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),l.a.createElement("i",{className:"fas fa-users fa-stack-1x orange"})),e.guests,"persona(s)")),l.a.createElement("div",{className:"column-xl"},l.a.createElement("p",null,l.a.createElement("span",{className:"fa-stack fa-lg"},l.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),l.a.createElement("i",{className:"fas fa-map-marker-alt fa-stack-1x orange"})),e.customer.username),l.a.createElement("p",null,l.a.createElement("span",{className:"fa-stack fa-lg"},l.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),l.a.createElement("i",{className:"fas fa-at fa-stack-1x orange"})),e.customer.email),l.a.createElement("p",null,l.a.createElement("span",{className:"fa-stack fa-lg"},l.a.createElement("i",{className:"fas fa-square fa-stack-2x orange-20"}),l.a.createElement("i",{className:"fas fa-phone fa-stack-1x orange"})),e.customer.telNumber)),l.a.createElement("div",{className:"column-xs"},l.a.createElement(Qe.a,{id:"dropdown-kokomo-button",title:l.a.createElement("i",{className:"fas fa-ellipsis-v"}),className:"float-right"},l.a.createElement(Ze.a.Item,{variant:"success",className:"dropdown-item",href:"whatsapp://send?text=\xa1Te espera una reserva de Kokomo! \ud83d\ude0e Aqu\xed tienes los detalles: http://kokomo-react.herokuapp.com/booking/details/"+e._id},l.a.createElement("i",{className:"mdi mdi-share-variant"})," Compartir reserva"),l.a.createElement(Ze.a.Divider,null),l.a.createElement("form",{onSubmit:s},l.a.createElement("input",{type:"hidden",name:"booking",value:e}),l.a.createElement("input",{type:"hidden",name:"bookingId",value:e._id}),l.a.createElement("input",{type:"hidden",name:"bookingRef",value:e.bookingRef}),l.a.createElement("input",{type:"hidden",name:"customer",value:e.customer._id}),l.a.createElement("button",{className:"link-danger"},l.a.createElement("i",{className:"far fa-trash-alt"})," Cancelar reserva")))))))})),l.a.createElement("div",null,la))},oa=new R,ca=new De,sa=l.a.createElement("p",null,"Todav\xeda no tienes reservas"),ma=l.a.createElement("p",null,"Todav\xeda no tienes reservas"),ia="client",ua=l.a.createElement(l.a.Fragment,null),pa={bookings:[],properties:[],user:{}},ga=function(e){var a=Object(n.useState)(pa),t=Object(c.a)(a,2),r=t[0],o=t[1];Object(n.useEffect)((function(){var e=b.a.CancelToken.source();oa.loggedin().then((function(e){e.owner&&(ia="owner"),o(Object(i.a)(Object(i.a)({},r),{},{user:e}))}));return function(){try{ca.myBookings().then((function(e){console.log("CONSOLE LOG DESDE AXIOS GET",e.bookings),o(Object(i.a)(Object(i.a)({},r),{},{bookings:e.bookings}))}))}catch(e){if(!b.a.isCancel(e))throw e;console.log("cancelled")}}(),function(){e.cancel()}}),[]),Object(n.useEffect)((function(){ca.propertiesBookings().then((function(e){console.log("CONSOLE LOG DESDE AXIOS GET bookings en mis props:",e.ownProperties),o(Object(i.a)(Object(i.a)({},r),{},{properties:e.ownProperties}))}))}),[]);var s=function(e){console.log("este es el bookingId: ",e),ca.deleteBooking(e).then((function(e){console.log(e),window.location.reload(!1)}))};return r.bookings.length&&(console.log(r.bookings),sa=r.bookings.map((function(e,a){return l.a.createElement(ea,{key:a,booking:e,delete:s})}))),console.log(e),e.loggedInUser.owner&&r.properties.length&&(console.log(r.properties),ma=r.properties.map((function(a,t){return l.a.createElement(ra,{key:t,property:a,user:e.loggedInUser,delete:s})})),ua=l.a.createElement(Ae.a,{eventKey:"owner",title:"Reservas en tus Locales",className:"nav-item nav-link"},l.a.createElement("div",null,l.a.createElement("div",{className:"tab-pane fade show active",id:"nav-next-bookings",role:"tabpanel","aria-labelledby":"nav-next-bookings-tab"},l.a.createElement("div",{className:"group-booking"},ma))))),l.a.createElement("div",{className:"body-container"},l.a.createElement("h3",{className:"section-title mt-4 mdi mdi-calendar"},"Gesti\xf3n de reservas"),l.a.createElement(Ge.a,{defaultActiveKey:ia,id:"nav-tab",className:"nav nav-tabs"},ua,l.a.createElement(Ae.a,{eventKey:"client",title:"Tus reservas",className:"nav-item nav-link"},l.a.createElement("div",null,l.a.createElement("div",{className:"tab-pane fade show active",id:"nav-next-bookings",role:"tabpanel","aria-labelledby":"nav-next-bookings-tab"},l.a.createElement("div",{className:"group-booking"},sa))))))},da=new f,Ea=function(e){var a={title:e.match.params.name,properties:[]},t=Object(n.useState)(a),r=Object(c.a)(t,2),o=r[0],s=r[1];return Object(n.useEffect)((function(){console.log(e),da.categoryProperties(o.title).then((function(e){console.log("CONSOLE LOG DESDE AXIOS GET",e[0]),s(Object(i.a)(Object(i.a)({},o),{},{properties:e[0]}))}))}),[]),l.a.createElement("div",null,l.a.createElement("div",{class:"body-container"},l.a.createElement("h3",{class:"section-title mt-4"},l.a.createElement("i",{class:"fas fa-heart fa-sm"}),o.title),l.a.createElement(N,{filter:o.title})))},ba=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"container text-center d-flex align-items-center justify-content-center",style:{height:"100vh"}},l.a.createElement("div",null,l.a.createElement("img",{src:"/images/warning.png",alt:"Error",style:{"max-width":"200px"}}),l.a.createElement("h1",{className:"heading-font orange mt-4"},"P\xe1gina no encontrada"),l.a.createElement("p",null,"\xa1Lo sentimos! Parece que no encontramos lo que buscas"),l.a.createElement(u.b,{to:"/",className:"btn-kokomo btn-kokomo-grey mt-4"},"Volver a inicio"))))},fa=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"container text-center d-flex align-items-center justify-content-center",style:{height:"100vh"}},l.a.createElement("div",null,l.a.createElement("img",{src:"/images/warning.png",alt:"Error",style:{"max-width":"200px"}}),l.a.createElement("h1",{class:"heading-font orange mt-4"},"Error del servidor"),l.a.createElement("p",null,"\xa1Lo sentimos! Parece que hay un error interno."),l.a.createElement(u.b,{to:"/",class:"btn-kokomo btn-kokomo-grey mt-4"},"Volver a inicio"))))},va=t(107),ha=new f,Na=new Oe;var ka=function(e){var a=Object(s.g)(),t=Object(n.useState)({property:{name:"",description:"",categories:[],mainImage:null,location:{name:"",lat:0,long:0}}}),r=Object(c.a)(t,2),o=r[0],m=r[1];Object(n.useEffect)((function(){ha.propertyDetails(e.match.params.propertyId).then((function(e){console.log("CONSOLE LOG DESDE AXIOS GET",e),m(Object(i.a)(Object(i.a)({},o),{},{property:e}))}))}),[]);var p=function(e){m(Object(i.a)(Object(i.a)({},o),{},{property:Object(i.a)(Object(i.a)({},o.property),{},Object(I.a)({},e.target.name,e.target.value))}))},g=[l.a.createElement("p",null,"Datos principales"),l.a.createElement("p",null,"El local")],d=[l.a.createElement("div",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-12 col-md-6"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"name",className:"label active"},"Nombre"),l.a.createElement("input",{type:"text",name:"name",value:o.property.name,onChange:p})),l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("div",{style:{width:"20%"}},l.a.createElement(va.a,{src:o.property.mainImage,rounded:!0,fluid:!0})),l.a.createElement("div",{className:"form-group",style:{width:"75%"}},l.a.createElement("label",{htmlFor:"imageUrl",className:"label active"},"Imagen"),l.a.createElement("input",{type:"file",name:"imageUrl",onChange:function(e){e.preventDefault();var a=new FormData;a.append("mainImage",e.target.files[0]),ha.uploadPicture(a).then((function(e){console.log("File upload successful:",e),m(Object(i.a)(Object(i.a)({},o),{},{property:Object(i.a)(Object(i.a)({},o.property),{},{mainImage:e.path})}))}))}})))),l.a.createElement("div",{className:"col-sm-12 col-md-6"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"description",className:"label active"},"Descripci\xf3n"),l.a.createElement("input",{type:"textarea",name:"description",value:o.property.description,onChange:p})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"categories",className:"label active"},"Categor\xeda"),l.a.createElement("input",{list:"categories",name:"categories",onChange:p}),l.a.createElement("datalist",{id:"categories"},l.a.createElement("option",{value:"Chillout"}),l.a.createElement("option",{value:"Surfer"}),l.a.createElement("option",{value:"Restaurante"}),l.a.createElement("option",{value:"Discoteca"}),l.a.createElement("option",{value:"Bar"})))))),l.a.createElement("div",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-12 col-md-6"},l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),Na.searchLocation(o.search).then((function(e){console.log(e),console.log(o),m(Object(i.a)(Object(i.a)({},o),{},{search:e.candidates[0].name,property:Object(i.a)(Object(i.a)({},o.property),{},{location:{lat:e.candidates[0].geometry.location.lat,long:e.candidates[0].geometry.location.lng,name:e.candidates[0].formatted_address}})}))}))},className:"d-flex"},l.a.createElement("div",{className:"form-group",style:{width:"80%"}},l.a.createElement("label",{htmlFor:"search",className:"label active"},"Direcci\xf3n"),l.a.createElement("input",{type:"text",name:"search",value:o.search,onChange:function(e){m(Object(i.a)(Object(i.a)({},o),{},Object(I.a)({},e.target.name,e.target.value)))}})),l.a.createElement("div",{style:{width:"20%"}},l.a.createElement("input",{type:"submit",value:"Buscar",className:"btn-kokomo-flex",style:{padding:"19px"}})))),l.a.createElement("div",{className:"col-sm-12 col-md-6"},l.a.createElement("p",null,"Candidato: ",o.search),l.a.createElement("p",null,"Direcci\xf3n:"," "+o.property.location.name),l.a.createElement("p",null,"Latitud:"," "+o.property.location.lat),l.a.createElement("p",null,"Longitud:"," "+o.property.location.long))))];return l.a.createElement("div",{className:"container mt-4"},l.a.createElement(u.b,{to:"/"},l.a.createElement("div",null,l.a.createElement("span",{className:"fa-stack fa-2x kokomo-back-button"},l.a.createElement("i",{className:"fas fa-circle fa-stack-2x circle-back"}),l.a.createElement("i",{class:"fas fa-arrow-left fa-stack-1x fa-inverse arrow-back"})))),l.a.createElement("div",{className:"hero"},l.a.createElement("h2",{className:"hero-title text-center"},o.property.name)),l.a.createElement(ye,{allSteps:d,stepsTitles:g,handleSubmit:function(e){e.preventDefault();var t={_id:o.property._id,name:o.property.name,description:o.property.description,categories:o.property.categories,location:{name:o.property.location.name,lat:o.property.location.lat,long:o.property.location.long},mainImage:o.property.mainImage};ha.editProperty(o.property._id,t).then((function(e){console.log("file uploaded",e),a.push("/property/".concat(o.property._id))})).catch((function(e){return console.log(e)}))}}))},ya=new De,Oa={booking:{bookingRef:"",day:"",time:"",guests:0,customer:{username:""}}},ja=function(e){var a=Object(n.useState)(Oa),t=Object(c.a)(a,2),r=t[0],o=t[1];return Object(n.useEffect)((function(){ya.bookingDetails(e.match.params.bookingId).then((function(e){console.log("CONSOLE LOG DESDE AXIOS GET",e),o(Object(i.a)(Object(i.a)({},r),{},{booking:e}))}))}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"container text-center d-flex align-items-center justify-content-center",style:{height:"90vh"}},l.a.createElement("div",null,l.a.createElement("img",{src:"/images/3.png",className:"emoji-img",alt:"Reserva creada"}),l.a.createElement("h2",{className:"subtitle-landing text-center mb-3"},"\xa1Reserva creada con \xe9xito!"),l.a.createElement("p",null,l.a.createElement("i",{className:"far fa-calendar-alt"})," D\xeda: ",r.booking.day),l.a.createElement("p",null,l.a.createElement("i",{className:"far fa-clock"})," Hora: ",r.booking.time),l.a.createElement("p",null,l.a.createElement("i",{className:"fas fa-users"})," N\xfamero de personas:"," ",r.booking.guests),l.a.createElement("p",null,l.a.createElement("i",{className:"fas fa-users"})," A nombre de:"," ",r.booking.customer.username),l.a.createElement("a",{href:"whatsapp://send?text=\xa1Te espera una reserva de Kokomo! \ud83d\ude0e Aqu\xed tienes los detalles: http://kokomo-react.herokuapp.com/booking/details/"+r.booking._id,className:"btn-kokomo btn-kokomo-grey mt-4 p-3 mr-4"},"Compartir reserva por WhatsApp"),l.a.createElement(u.b,{to:"/",className:"btn-kokomo btn-kokomo-grey mt-4 p-3"},"Volver a inicio"))))};var wa=function(){var e={loggedInUser:null},a=Object(n.useState)(e),t=Object(c.a)(a,2),r=t[0],o=t[1],m=function(e){o({loggedInUser:e})},i=function(){o(e)},u=JSON.parse(localStorage.saveData||null)||{},p=new R;function g(){return u.obj}return Object(n.useEffect)((function(){null===r.loggedInUser&&(void 0!==g()?m(g()):p.loggedin().then((function(e){var a;a=e,u.obj=a,localStorage.saveData=JSON.stringify(u),m(g())})))}),[]),l.a.createElement(s.d,null,l.a.createElement(te,{user:r.loggedInUser,exact:!0,callback:m,path:"/property/create-property",component:Ce}),l.a.createElement(te,{user:r.loggedInUser,callback:m,path:"/property/edit/:propertyId",component:ka}),l.a.createElement(s.b,{path:"/property/:propertyId",render:function(e){return l.a.createElement(Xe,Object.assign({},e,{getTheUser:r.loggedInUser}))}}),l.a.createElement(s.b,{path:"/booking/details/:bookingId",render:function(e){return l.a.createElement(ja,e)}}),l.a.createElement(s.b,{component:function(){return l.a.createElement("div",null,l.a.createElement(D,{getTheUser:r.loggedInUser,key:r.loggedInUser}),l.a.createElement(s.d,null,l.a.createElement(s.b,{exact:!0,path:"/"},null===r.loggedInUser?l.a.createElement(w,null):l.a.createElement(We,null)),l.a.createElement(s.b,{path:"/category/:name",render:function(e){return l.a.createElement(Ea,Object.assign({},e,{getTheUser:r.loggedInUser}))}}),l.a.createElement(s.b,{path:"/login",render:function(e){return l.a.createElement(U,Object.assign({},e,{callback:m}))}}),l.a.createElement(s.b,{path:"/signup",render:function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(H,Object.assign({},e,{callback:m})))}}),l.a.createElement(s.b,{path:"/signup-local",render:function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(G,Object.assign({},e,{callback:m})))}}),l.a.createElement(te,{key:r.loggedInUser,user:r.loggedInUser,callback:m,path:"/profile",component:Q}),l.a.createElement(te,{key:r.loggedInUser,user:r.loggedInUser,callback:m,path:"/my-favourites",component:$e}),l.a.createElement(te,{key:r.loggedInUser,user:r.loggedInUser,callback:m,path:"/my-bookings",component:ga}),l.a.createElement(te,{user:r.loggedInUser,exact:!0,callback:m,path:"/property/create-property",component:Ce}),l.a.createElement(te,{user:r.loggedInUser,path:"/search",component:He}),l.a.createElement(s.b,{exact:!0,path:"/logout",render:function(e){return l.a.createElement(L,Object.assign({},e,{reset:i,callback:m}))}})))}}),l.a.createElement(s.b,{path:"*",component:ba,status:404}),l.a.createElement(s.b,{path:"*",component:fa,status:500}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(u.a,null,l.a.createElement(wa,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[115,1,2]]]);
//# sourceMappingURL=main.3000ed77.chunk.js.map